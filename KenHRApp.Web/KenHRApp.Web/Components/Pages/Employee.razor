@page "/employees"
@using KenHRApp.Domain.Entities
@using KenHRApp.Application.Common.Interfaces
@using System.Text
@using System.ComponentModel.DataAnnotations
@using KenHRApp.Web.Components.Common
@using KenHRApp.Web.Components.Shared

@* @implements IDisposable     // Implements System.IDisposable so that the Dispose method can be called 
@inject ILogger<Employee> Logger

@inject IEmployeeService EmployeeService
@inject IAppCacheService AppCacheService
@inject ISnackbar Snackbar
@inject ILookupCacheService LookupCache
@inject NavigationManager Navigation
@inject IDialogService DialogService *@

<MudContainer MaxWidth="MaxWidth.False" Class="px-4">
    <EditForm EditContext="@_editContext"
        OnValidSubmit="HandleValidSubmit" 
        OnInvalidSubmit="HandleInvalidSubmit">
    <DataAnnotationsValidator/>
        @if (_hasValidationError && _validationMessages.Any())
        {
            <MudAlert Severity="Severity.Error" Variant="Variant.Filled" Dense="true" Class="mb-2">
                <MudText Typo="Typo.subtitle1"><strong>Please correct the following data entry errors:</strong></MudText>
                <ul style="margin:0; padding-left:20px;">
                @foreach (var msg in _validationMessages)
                {
                    <li>
                        <MudText Typo="Typo.subtitle2" Class="text-white">@msg</MudText>
                    </li>
                }
            </ul>
            </MudAlert>
        }
        <MudPaper class="paper-header w-100 px-4" Elevation="0">
            <MudText Typo="Typo.h5" Align="Align.Start" Class="pb-3 ps-3" Style="color: #004165;">@employee.EmployeeFullName</MudText>
                <MudBreadcrumbs Items="@_breadcrumbItems" SeparatorIcon="@Icons.Material.Filled.ChevronRight" MaxItems="4" Class="mud-primary-text" />
            <MudPaper>
                @if (ActionType == ActionTypes.Edit.ToString() ||
                    ActionType == ActionTypes.View.ToString())
                {
                    <MudButton Variant="Variant.Filled" StartIcon="@Icons.Material.Filled.Edit"
                               Size="Size.Small" Color="Color.Info" Disabled="@(_isEditMode)" OnClick="HandleEditEmployee">
                        Edit
                    </MudButton>
                }
                <MudButton Variant="Variant.Filled" StartIcon="@Icons.Material.Filled.Save" ButtonType="ButtonType.Submit" Class="ml-1"
                    Size="Size.Small" Color="Color.Success" Disabled="@(!_saveBtnEnabled)">
                    Save
                </MudButton>
                @if (ActionType == ActionTypes.Edit.ToString() ||
                    ActionType == ActionTypes.View.ToString())
                {
                    <MudButton Variant="Variant.Filled" StartIcon="@Icons.Material.Filled.Undo" Class="ml-1"
                        Size="Size.Small" Color="Color.Warning" Disabled="@(!_isEditMode)" OnClick="HandleUndoChanges">
                        Undo
                    </MudButton>
                    <MudButton Variant="Variant.Filled" StartIcon="@Icons.Material.Filled.Refresh" 
                        Size="Size.Small" Color="Color.Tertiary" Disabled="@(_isEditMode)" OnClick="HandleRefreshPage">
                        Refresh
                    </MudButton>
                    <MudButton Variant="Variant.Filled" StartIcon="@Icons.Material.Filled.Delete"
                               Size="Size.Small" Color="Color.Error" Disabled="@_isEditMode" OnClick="@ShowDeleteDialog">
                        Delete
                    </MudButton>
                }
                @if (ActionType == ActionTypes.Add.ToString())
                {
                    <MudButton Variant="Variant.Filled" StartIcon="@Icons.Material.Filled.Cancel" Class="ml-1" OnClick="@ShowCancelDialog"
                        Size="Size.Small" Color="Color.Error">
                        Cancel
                    </MudButton>
                }
            </MudPaper>
        </MudPaper>
        <MudTabs Elevation="4" Rounded="true" ApplyEffectsToContainer="true" Position="Position.Top" Color="Color.Default"
            PanelClass="pa-6" ActiveTabClass="border-solid border-2 mud-border-primary">
            @if (_showErrorAlert)
            {
                <MudAlert Severity="Severity.Error" Variant="Variant.Filled" ContentAlignment="HorizontalAlignment.Left"
                          ShowCloseIcon="true" CloseIconClicked="(() => ShowHideError(false))">
                    @_errorMessage
                </MudAlert>
            }
            <MudTabPanel Text="About Me" ToolTip="Manage employee profile" Icon="@Icons.Material.Rounded.Person2">
                <div id="aboutMePanel" class="ma-0 full-height" style="overflow-y: scroll; scrollbar-width: none;">
                    <MudExpansionPanels Elevation="0" MultiExpansion="true">
                        <MudExpansionPanel Class="pt-0 mt-0" Dense Gutters Expanded>
                            <TitleContent>
                                <div class="d-flex">
                                    <MudIcon Icon="fas fa-user-edit" Style="color: #004165;" class="mr-3" Size=Size.Small></MudIcon>
                                    <MudText Typo="Typo.subtitle1" Style="text-decoration: underline; color: #004165;"><strong>Personal Details</strong></MudText>
                                </div>
                            </TitleContent>
                            <ChildContent>
                                <MudGrid Spacing="0">
                                    <MudItem xs="6" sm="4" Class="px-4">
                                        <MudStack Row="false" AlignItems="AlignItems.Stretch" Spacing="0" Wrap="Wrap.NoWrap">
                                            <MudPaper Elevation="0" Class="p-0">                                            
                                                <MudAutocomplete @bind-Value="employee.SalutationDesc"
                                                    Label="Salutation"
                                                                 For="@(() => employee.SalutationDesc)"
                                                                 Class="employee-autocomplete"
                                                    SearchFunc="SearchSalutation!"
                                                    Variant="Variant.Text"                                                    
                                                    Margin="Margin.Dense"
                                                    Dense="true"
                                                    Placeholder="Please Select"
                                                    HelperText="Type a key to search for value"
                                                    HelperTextOnFocus="true"
                                                    Clearable="@_isCboClearable"
                                                    Typo="Typo.subtitle2"
                                                    MaxItems="@(_salutationList != null ? _salutationList.Count : 10)"
                                                    Disabled="@_isDisabled"                                                
                                                    Modal="true" />
                                            </MudPaper>
                                            <MudPaper Elevation="0" Class="p-0">
                                                @* <LabelWithAsterisk TModel="EmployeeDTO" TValue="string" Label="Last Name" For="x => x.LastName" /> *@
                                                <MudTextField @bind-Value="employee.LastName" For="@(() => employee.LastName)" 
                                                    HelperText="Max. text input is 50 chars." Variant="Variant.Text" HelperTextOnFocus="true"
                                                    Counter="50" MaxLength="50" Disabled="@_isDisabled" Label="Last Name"
                                                    Clearable="@_isClearable" Immediate="true" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                            </MudPaper>
                                            <MudPaper Elevation="0" Class="p-0">
                                                <MudAutocomplete @bind-Value="employee.NationalityDesc"
                                                    Label="Nationality"
                                                    For="@(() => employee.NationalityDesc)" 
                                                    Class="employee-autocomplete"
                                                    SearchFunc="SearchCountry!"
                                                    Variant="Variant.Text"                                                    
                                                    Margin="Margin.Dense"
                                                    Dense="true"
                                                    Placeholder="Please Select"
                                                    HelperText="Type a key to search for value"
                                                    HelperTextOnFocus="true"
                                                    Clearable="@_isCboClearable" 
                                                    Typo="Typo.subtitle2"
                                                    MaxItems="@(_countryList != null ? _countryList.Count : 10)"
                                                    Disabled="@_isDisabled"
                                                    Modal="true" />
                                            </MudPaper>
                                        </MudStack>
                                    </MudItem>  
                                    <MudItem xs="6" sm="4" Class="px-4">
                                        <MudStack Row="false" AlignItems="AlignItems.Stretch" Spacing="0" Wrap="Wrap.NoWrap">
                                            <MudPaper Elevation="0" Class="p-0">
                                                @* <LabelWithAsterisk TModel="EmployeeDTO" TValue="string" Label="First Name" For="x => x.FirstName" /> *@
                                                <MudTextField @bind-Value="employee.FirstName" For="@(() => employee.FirstName)" 
                                                    HelperText="Max. text input is 50 chars." Variant="Variant.Text" HelperTextOnFocus="true"
                                                              Counter="50" MaxLength="50" Disabled="@_isDisabled" Label="First Name"
                                                              Clearable="@_isClearable" Immediate="true" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                            </MudPaper>
                                            <MudPaper Elevation="0" Class="p-0">
                                                @* <LabelWithAsterisk TModel="EmployeeDTO" TValue="string" Label="Religion" For="x => x.ReligionDesc" /> *@
                                                <MudAutocomplete @bind-Value="employee.ReligionDesc"
                                                    For="@(() => employee.ReligionDesc)" 
                                                    Class="employee-autocomplete"
                                                    Label="Religion"
                                                    SearchFunc="SearchReligion!"
                                                    Variant="Variant.Text"                                                    
                                                    Margin="Margin.Dense"
                                                    Dense="true"
                                                    Placeholder="Please Select"
                                                    HelperText="Type a key to search for value"
                                                    HelperTextOnFocus="true"
                                                    Clearable="@_isCboClearable" 
                                                    Typo="Typo.subtitle2"
                                                    Disabled="@_isDisabled"
                                                    MaxItems="@(_religionList != null ? _religionList.Count : 10)"
                                                    Modal="true" />
                                            </MudPaper>
                                            <MudPaper Elevation="0" Class="p-0">       
                                                @* <LabelWithAsterisk TModel="EmployeeDTO" TValue="string" Label="Gender" For="x => x.GenderDesc" /> *@
                                                <MudAutocomplete @bind-Value="employee.GenderDesc"
                                                    For="@(() => employee.GenderDesc)" 
                                                    Class="employee-autocomplete"
                                                    SearchFunc="SearchGender!"
                                                    Label="Gender"
                                                    Variant="Variant.Text"                                                    
                                                    Margin="Margin.Dense"
                                                    Dense="true"
                                                    Placeholder="Please Select"
                                                    HelperText="Type a key to search for value"
                                                    HelperTextOnFocus="true"
                                                    Clearable="@_isCboClearable" 
                                                    Typo="Typo.subtitle2"
                                                    Disabled="@_isDisabled"
                                                    Modal="true" />
                                            </MudPaper>
                                        </MudStack>
                                    </MudItem>
                                    <MudItem xs="6" sm="4" Class="px-4">
                                        <MudStack Row="false" AlignItems="AlignItems.Stretch" Spacing="0" Wrap="Wrap.NoWrap">
                                            <MudPaper Elevation="0" Class="p-0">
                                                <MudTextField @bind-Value="employee.MiddleName" Label="Middle Name"
                                                              For="@(() => employee.MiddleName)"
                                                              HelperText="Max. text input is 50 chars." Variant="Variant.Text" HelperTextOnFocus="true"
                                                    Counter="50" MaxLength="50" Disabled="@_isDisabled"
                                                    Clearable="@_isClearable" Immediate="true" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                            </MudPaper>
                                            <MudPaper Elevation="0" Class="p-0">
                                                <MudDatePicker Editable="true" @bind-Date="employee.DOB" Label="Date of Birth"
                                                    For="@(() => employee.DOB)" MaxDate="@DateTime.Today" AutoClose="true" 
                                                    Margin="Margin.Dense" Style="width:300px;"
                                                    HelperText="Enter date in dd/MM/yyyy format" HelperTextOnFocus="true" 
                                                    Clearable="@_isCboClearable" Disabled="@_isDisabled" 
                                                    Mask="@(new DateMask("dd/MM/yyyy"))" DateFormat="dd/MM/yyyy" Placeholder="dd/MM/yyyy" Variant="Variant.Text">
                                                    <PickerActions Context="dboContext">
                                                        <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="@(async () => await this.InvokeAsync(() => employee.DOB = DateTime.Today))">Today</MudButton>
                                                        <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="@(async () => await this.InvokeAsync(() => employee.DOB = null))">Clear</MudButton>
                                                    </PickerActions>
                                                </MudDatePicker>
                                            </MudPaper>
                                            <MudPaper Elevation="0" Class="p-0">        
                                                @* <LabelWithAsterisk TModel="EmployeeDTO" TValue="string" Label="Marital Status" For="x => x.MaritalStatusDesc" /> *@
                                                <MudAutocomplete @bind-Value="employee.MaritalStatusDesc"
                                                    For="@(() => employee.MaritalStatusDesc)" 
                                                    Class="employee-autocomplete"
                                                    SearchFunc="SearchMaritalStatus!"
                                                    Label="Marital Status"
                                                    Variant="Variant.Text"                                                    
                                                    Margin="Margin.Dense"
                                                    Dense="true"
                                                    Placeholder="Please Select"
                                                    HelperText="Type a key to search for value"
                                                    HelperTextOnFocus="true"
                                                    Clearable="@_isCboClearable"
                                                    Typo="Typo.subtitle2"
                                                    Disabled="@_isDisabled"
                                                    Modal="true" />
                                            </MudPaper>
                                        </MudStack>
                                    </MudItem>
                                </MudGrid>
                            </ChildContent>
                        </MudExpansionPanel>
                        <MudExpansionPanel Class="pt-0 mt-0" Dense Gutters Expanded>
                            <TitleContent>
                                <div class="d-flex panel-section">
                                    <MudIcon Icon="fas fa-phone" class="mr-3 pt-1" Style="color: #004165;" Size=Size.Small></MudIcon>
                                    <MudText Typo="Typo.subtitle1" Style="text-decoration: underline; color: #004165;"><strong>Contact Details</strong></MudText>
                                </div>
                            </TitleContent>
                            <ChildContent>
                                <MudGrid Spacing="0">
                                    <MudItem xs="6" sm="4" Class="px-4">
                                        <MudStack Row="false" AlignItems="AlignItems.Stretch" Spacing="0" Wrap="Wrap.NoWrap">
                                            <MudPaper Elevation="0" Class="p-0">
                                                @* <LabelWithAsterisk TModel="EmployeeDTO" TValue="string" Label="Office Email" For="x => x.OfficialEmail" /> *@
                                                <MudTextField @bind-Value="employee.OfficialEmail" For="@(() => employee.OfficialEmail)" 
                                                    HelperText="Max. text input is 50 chars." Variant="Variant.Text" HelperTextOnFocus="true"
                                                    Counter="50" MaxLength="50" Disabled="@_isDisabled" Label="Office Email"
                                                    Clearable="@_isClearable" Immediate="true" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                            </MudPaper>
                                            <MudPaper Elevation="0" Class="p-0">
                                                <MudTextField @bind-Value="employee.OfficeLandlineNo" Label="Office Landline No." 
                                                    For="@(() => employee.OfficeLandlineNo)" 
                                                    HelperText="Max. text input is 20 chars." Variant="Variant.Text" HelperTextOnFocus="true"
                                                    Counter="20" MaxLength="20" Disabled="@_isDisabled"
                                                    Clearable="@_isClearable" Immediate="true" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                            </MudPaper>
                                            <MudPaper Elevation="0" Class="p-0">
                                                <MudTextField @bind-Value="employee.AlternateMobileNo" Label="Alternate Mobile No." 
                                                    For="@(() => employee.AlternateMobileNo)" 
                                                    HelperText="Max. text input is 50 chars." Variant="Variant.Text" HelperTextOnFocus="true"
                                                    Counter="20" MaxLength="20" Disabled="@_isDisabled"
                                                    Clearable="@_isClearable" Immediate="true" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                            </MudPaper>
                                        </MudStack>
                                    </MudItem>
                                    <MudItem xs="6" sm="4" Class="px-4">
                                        <MudStack Row="false" AlignItems="AlignItems.Stretch" Spacing="0" Wrap="Wrap.NoWrap">
                                            <MudPaper Elevation="0" Class="p-0">
                                                <MudTextField @bind-Value="employee.PersonalEmail"Label="Personal Email"
                                                    For="@(() => employee.PersonalEmail)" Immediate="true"
                                                    HelperText="Max. text input is 50 chars." Variant="Variant.Text" HelperTextOnFocus="true"
                                                    Counter="50" MaxLength="50" Disabled="@_isDisabled"
                                                    Clearable="@_isClearable" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                            </MudPaper>
                                            <MudPaper Elevation="0" Class="p-0">
                                                <MudTextField @bind-Value="employee.OfficeExtNo" Label="Office Extension" 
                                                    For="@(() => employee.OfficeExtNo)" 
                                                    HelperText="Max. text input is 10 chars." Variant="Variant.Text" HelperTextOnFocus="true"
                                                    Counter="10" MaxLength="10" Disabled="@_isDisabled"
                                                    Clearable="@_isClearable" Immediate="true" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                            </MudPaper>
                                            <MudPaper Elevation="0" Class="p-0">
                                                <MudTextField @bind-Value="employee.ResidenceLandlineNo" Label="Residential Landline No." 
                                                    For="@(() => employee.ResidenceLandlineNo)" 
                                                    HelperText="Max. text input is 20 chars." Variant="Variant.Text" HelperTextOnFocus="true"
                                                    Counter="50" MaxLength="20" Disabled="@_isDisabled"
                                                    Clearable="@_isClearable" Immediate="true" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                            </MudPaper>
                                        </MudStack>
                                    </MudItem>
                                    <MudItem xs="6" sm="4" Class="px-4">
                                        <MudStack Row="false" AlignItems="AlignItems.Stretch" Spacing="0" Wrap="Wrap.NoWrap">
                                            <MudPaper Elevation="0" Class="p-0">
                                                <MudTextField @bind-Value="employee.AlternateEmail" Label="Alternate Email" 
                                                    For="@(() => employee.AlternateEmail)" 
                                                    HelperText="Max. text input is 50 chars." Variant="Variant.Text" HelperTextOnFocus="true"
                                                    Counter="50" MaxLength="50" Disabled="@_isDisabled"
                                                    Clearable="@_isClearable" Immediate="true" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                            </MudPaper>
                                            <MudPaper Elevation="0" Class="p-0">
                                                <MudTextField @bind-Value="employee.MobileNo" Label="Mobile No." 
                                                    For="@(() => employee.MobileNo)" 
                                                    HelperText="Max. text input is 20 chars." Variant="Variant.Text" HelperTextOnFocus="true"
                                                    Counter="20" MaxLength="20" Disabled="@_isDisabled"
                                                    Clearable="@_isClearable" Immediate="true" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                            </MudPaper>
                                        </MudStack>
                                    </MudItem>
                                </MudGrid>
                            </ChildContent>
                        </MudExpansionPanel>
                        <MudExpansionPanel Class="pt-0 mt-0" Expanded Dense Gutters>
                            <TitleContent>
                                <div class="d-flex">
                                    <MudIcon Icon="fas fa-briefcase" class="mr-3 pt-1" Style="font-size: 20px; color: #004165;"></MudIcon>
                                    <MudText Typo="Typo.subtitle1" Style="text-decoration: underline; color: #004165;"><strong>Employment Details</strong></MudText>
                                </div>
                            </TitleContent>
                            <ChildContent>
                                <MudGrid Spacing="0">
                                    <MudItem xs="6" sm="4" Class="px-4">
                                        <MudStack Row="false" AlignItems="AlignItems.Stretch" Spacing="0" Wrap="Wrap.NoWrap">
                                            <MudPaper Elevation="0" Class="p-0">
                                                <MudTextField @bind-Value="employee.EmployeeNo" Label="Employee No." 
                                                    For="@(() => employee.EmployeeNo)" 
                                                    HelperText="Max. text input is 50 chars." Variant="Variant.Text" HelperTextOnFocus="true"
                                                    Clearable="@_isClearable" Immediate="true" Margin="Margin.Dense" Disabled="true" 
                                                    Typo="Typo.subtitle2" />
                                            </MudPaper>
                                            <MudPaper Elevation="0" Class="p-0">
                                                <MudTextField @bind-Value="employee.OldEmployeeNo" Label="Old Employee No" 
                                                    For="@(() => employee.OldEmployeeNo)" 
                                                    HelperText="Max. text input is 50 chars." Variant="Variant.Text" HelperTextOnFocus="true"
                                                    Clearable="@_isClearable" Disabled="@_isDisabled" Immediate="true" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                            </MudPaper>
                                            <MudPaper Elevation="0" Class="p-0">
                                                <MudDatePicker Label="Date of Joining" Editable="true" @bind-Date="employee.HireDate" 
                                                    For="@(() => employee.HireDate)" AutoClose="true" 
                                                    Margin="Margin.Dense" Style="width:300px;"
                                                    HelperText="Enter date in dd/MM/yyyy format" HelperTextOnFocus="true" Clearable="@_isCboClearable" Disabled="@_isDisabled"
                                                    Mask="@(new DateMask("dd/MM/yyyy"))" DateFormat="dd/MM/yyyy" Placeholder="dd/MM/yyyy" Variant="Variant.Text">
                                                    <PickerActions Context="dateContext">
                                                        <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="@(async () => await this.InvokeAsync(() => employee.HireDate = DateTime.Today))">Today</MudButton>
                                                        <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="@(async () => await this.InvokeAsync(() => employee.HireDate = null))">Clear</MudButton>
                                                    </PickerActions>
                                                </MudDatePicker>
                                            </MudPaper>
                                            <MudPaper Elevation="0" Class="p-0">
                                                <MudDatePicker Label="Relieving Date" Editable="true" 
                                                    @bind-Date="employee.TerminationDate" AutoClose="true" 
                                                    For="@(() => employee.TerminationDate)" 
                                                    Margin="Margin.Dense" Style="width:300px;"
                                                    HelperText="Enter date in dd/MM/yyyy format" HelperTextOnFocus="true" Clearable="@_isCboClearable" Disabled="@_isDisabled"
                                                    Mask="@(new DateMask("dd/MM/yyyy"))" DateFormat="dd/MM/yyyy" Placeholder="dd/MM/yyyy" Variant="Variant.Text">
                                                    <PickerActions Context="dateContext">
                                                        <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="@(async () => await this.InvokeAsync(() => employee.TerminationDate = DateTime.Today))">Today</MudButton>
                                                        <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="@(async () => await this.InvokeAsync(() => employee.TerminationDate = null))">Clear</MudButton>
                                                    </PickerActions>
                                                </MudDatePicker>
                                            </MudPaper>                                
                                        </MudStack>
                                    </MudItem>
                                    <MudItem xs="6" sm="4" Class="px-4">
                                        <MudStack Row="false" AlignItems="AlignItems.Stretch" Spacing="0" Wrap="Wrap.NoWrap">
                                            <MudAutocomplete @bind-Value="employee.EmployeeStatusDesc"
                                                    For="@(() => employee.EmployeeStatusDesc)" 
                                                    Class="employee-autocomplete"
                                                    SearchFunc="SearchEmployeeStatus!"
                                                    Variant="Variant.Text"
                                                    Label="Employee Status"
                                                    Margin="Margin.Dense"
                                                    Dense="true"
                                                    Placeholder="Please Select"
                                                    HelperText="Type a key to search for value"
                                                    HelperTextOnFocus="true"
                                                    Clearable="@_isCboClearable" 
                                                    Typo="Typo.subtitle2"
                                                    Disabled="@_isDisabled"
                                                    Modal="true" />
                                            <MudPaper Elevation="0" Class="p-0">
                                                <MudTextField @bind-Value="employee.WorkPermitID" Label="Work Permit ID" 
                                                    For="@(() => employee.WorkPermitID)" 
                                                    HelperText="Max. text input is 50 chars." Variant="Variant.Text" HelperTextOnFocus="true"
                                                    Clearable="@_isClearable" Disabled="@_isDisabled" Immediate="true" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                            </MudPaper>
                                            <MudPaper Elevation="0" Class="p-0">
                                                <MudTextField @bind-Value="employee.Tenure" Label="Tenure"
                                                    For="@(() => employee.Tenure)"
                                                    HelperText="Read-only field that calculates the service period" Variant="Variant.Text" HelperTextOnFocus="true"
                                                    ReadOnly="true" Immediate="true" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                            </MudPaper>
                                            <MudPaper Elevation="0" Class="p-0">
                                                <MudDatePicker Label="Date of Superannuation" Editable="true" AutoClose="true" 
                                                    @bind-Date="employee.DateOfSuperannuation" 
                                                    For="@(() => employee.DateOfSuperannuation)"
                                                    Margin="Margin.Dense" Style="width:300px;"
                                                    HelperText="Enter date in dd/MM/yyyy format" HelperTextOnFocus="true" Clearable="@_isCboClearable" Disabled="@_isDisabled"
                                                    Mask="@(new DateMask("dd/MM/yyyy"))" DateFormat="dd/MM/yyyy" Placeholder="dd/MM/yyyy" Variant="Variant.Text">
                                                    <PickerActions Context="dateContext">
                                                        <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="@(async () => await this.InvokeAsync(() => employee.DateOfSuperannuation = DateTime.Today))">Today</MudButton>
                                                        <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="@(async () => await this.InvokeAsync(() => employee.DateOfSuperannuation = null))">Clear</MudButton>
                                                    </PickerActions>
                                                </MudDatePicker>
                                            </MudPaper>
                                        </MudStack>
                                    </MudItem>
                                    <MudItem xs="6" sm="4" Class="px-4">
                                        <MudStack Row="false" AlignItems="AlignItems.Stretch" Spacing="0" Wrap="Wrap.NoWrap">
                                            <MudPaper Elevation="0" Class="p-0">
                                                <MudAutocomplete @bind-Value="employee.ReportingManager"
                                                    For="@(() => employee.ReportingManager)"
                                                    SearchFunc="SearchReportingManager!"
                                                    Variant="Variant.Text"
                                                    Label="Reporting Manager"
                                                    Margin="Margin.Dense"
                                                    Dense="true"
                                                    Placeholder="Please Select"
                                                    HelperText="Type a key to search for value"
                                                    HelperTextOnFocus="true"
                                                    Clearable="@_isCboClearable" 
                                                    Typo="Typo.subtitle2"
                                                    Disabled="@_isDisabled"
                                                    Modal="true" />
                                            </MudPaper>
                                            <MudPaper Elevation="0" Class="p-0">
                                                <MudDatePicker Label="Work Permit Expiry Date" Editable="true" AutoClose="true" 
                                                    @bind-Date="employee.WorkPermitExpiryDate" 
                                                    For="@(() => employee.WorkPermitExpiryDate)"
                                                    Margin="Margin.Dense" Style="width:300px;"
                                                    HelperText="Enter date in dd/MM/yyyy format" HelperTextOnFocus="true" Clearable="@_isCboClearable" Disabled="@_isDisabled"
                                                    Mask="@(new DateMask("dd/MM/yyyy"))" DateFormat="dd/MM/yyyy" Placeholder="dd/MM/yyyy" Variant="Variant.Text">
                                                    <PickerActions Context="dateContext">
                                                        <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="@(async () => await this.InvokeAsync(() => employee.WorkPermitExpiryDate = DateTime.Today))">Today</MudButton>
                                                        <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="@(async () => await this.InvokeAsync(() => employee.WorkPermitExpiryDate = null))">Clear</MudButton>
                                                    </PickerActions>
                                                </MudDatePicker>
                                            </MudPaper>
                                            <MudPaper Elevation="0" Class="p-0">
                                                <MudDatePicker Label="Date of Confirmation" Editable="true" @bind-Date="employee.DateOfConfirmation" Margin="Margin.Dense" Style="width:300px;"
                                                               HelperText="Enter date in dd/MM/yyyy format" HelperTextOnFocus="true" Clearable="@_isCboClearable" Disabled="@_isDisabled" AutoClose="true"
                                                               Mask="@(new DateMask("dd/MM/yyyy"))" DateFormat="dd/MM/yyyy" Placeholder="dd/MM/yyyy" Variant="Variant.Text">
                                                    <PickerActions Context="dateContext">
                                                        <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="@(async () => await this.InvokeAsync(() => employee.DateOfConfirmation = DateTime.Today))">Today</MudButton>
                                                        <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="@(async () => await this.InvokeAsync(() => employee.DateOfConfirmation = null))">Clear</MudButton>
                                                    </PickerActions>
                                                </MudDatePicker>
                                            </MudPaper>                                       
                                            <MudAutocomplete @bind-Value="employee.DepartmentName"
                                                For="@(() => employee.DepartmentName)"
                                                SearchFunc="SearchDepartment!"
                                                Variant="Variant.Text"
                                                Label="Department"
                                                Margin="Margin.Dense"
                                                Dense="true"
                                                Placeholder="Please Select"
                                                HelperText="Type a key to search for value"
                                                HelperTextOnFocus="true"
                                                Clearable="@_isCboClearable" 
                                                Typo="Typo.subtitle2"
                                                Disabled="@_isDisabled"
                                                             MaxItems="@(_departmentList != null ? _departmentList.Count : 10)"
                                                Modal="true" />
                                        </MudStack>
                                    </MudItem>
                                </MudGrid>
                            </ChildContent>
                        </MudExpansionPanel>                
                        <MudExpansionPanel Class="pt-0 mt-0" Dense Gutters>
                            <TitleContent>
                                <div class="d-flex">
                                    <MudIcon Icon="fas fa-user-tie" class="mr-3 pt-1" Style="color: #004165;" Size=Size.Small></MudIcon>
                                    <MudText Typo="Typo.subtitle1" Style="text-decoration: underline; color: #004165;"><strong>Attribute Details</strong></MudText>
                                </div>
                            </TitleContent>
                            <ChildContent>
                                <MudStack Row="true" AlignItems="AlignItems.Start" Spacing="4" Wrap="Wrap.Wrap" Justify="Justify.FlexStart" StretchItems="StretchItems.All">
                                    <MudPaper Elevation="0" Class="p-0" Style="width: 300px;">
                                        <MudTextField @bind-Value="employee.Company" 
                                            For="@(() => employee.Company)" Label="Company" 
                                            Counter="150" MaxLength="150"
                                            HelperText="Max. text input is 50 chars." Variant="Variant.Text" HelperTextOnFocus="true"
                                            Clearable="@_isClearable" Disabled="@_isDisabled" Immediate="true" 
                                            Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                    </MudPaper>
                                    <MudPaper Elevation="0" Class="p-0"  Style="width: 300px;">
                                        <MudTextField @bind-Value="employee.CompanyBranch" 
                                            For="@(() => employee.CompanyBranch)" Label="Company Branch" 
                                            Counter="150" MaxLength="150"
                                            HelperText="Max. text input is 50 chars." Variant="Variant.Text" HelperTextOnFocus="true"
                                            Clearable="@_isClearable" Disabled="@_isDisabled" Immediate="true" 
                                            Margin="Margin.Dense" Typo="Typo.subtitle2" />

                                        @* <MudAutocomplete @bind-Value="employee.CompanyBranchDesc"
                                            For="@(() => employee.CompanyBranchDesc)"
                                            Class="employee-autocomplete"
                                            SearchFunc="SearchCompanyBranch!"
                                            Variant="Variant.Text"
                                            Label="Company Branch"
                                            Margin="Margin.Dense"
                                            Dense="true"
                                            Placeholder="Please Select"
                                            HelperText="Type a key to search for value"
                                            HelperTextOnFocus="true"
                                            Clearable="@_isCboClearable" 
                                            Typo="Typo.subtitle2"
                                            Disabled="@_isDisabled"
                                            MaxItems="@(_companyBranchList != null ? _companyBranchList.Count : 10)"
                                            Modal="true" /> *@
                                    </MudPaper>
                                    <MudPaper Elevation="0" Class="p-0"  Style="width: 300px;">                                   
                                        <MudAutocomplete @bind-Value="employee.EducationDesc"
                                            For="@(() => employee.EducationDesc)"
                                            Class="employee-autocomplete"
                                            SearchFunc="SearchEducationLevel!"
                                            Variant="Variant.Text"
                                            Label="Education Level"
                                            Margin="Margin.Dense"
                                            Dense="true"
                                            Placeholder="Please Select"
                                            HelperText="Type a key to search for value"
                                            HelperTextOnFocus="true"
                                            Clearable="@_isCboClearable" 
                                            Typo="Typo.subtitle2"
                                            Disabled="@_isDisabled"
                                            MaxItems="@(_educationLevelList != null ? _educationLevelList.Count : 10)"
                                            Modal="true" />
                                    </MudPaper>    
                                    <MudFlexBreak />
                                    <MudPaper Elevation="0" Class="p-0"  Style="width: 300px;">
                                        <MudAutocomplete @bind-Value="employee.EmployeeClassDesc"
                                            For="@(() => employee.EmployeeClassDesc)"
                                            Class="employee-autocomplete"
                                            SearchFunc="SearchEmployeeClass!"
                                            Variant="Variant.Text"
                                            Label="Employee Class"
                                            Margin="Margin.Dense"
                                            Dense="true"
                                            Placeholder="Please Select"
                                            HelperText="Type a key to search for value"
                                            HelperTextOnFocus="true"
                                            Clearable="@_isCboClearable" 
                                            Typo="Typo.subtitle2"
                                            Disabled="@_isDisabled"
                                            MaxItems="@(_employeeClassList != null ? _employeeClassList.Count : 10)"
                                            Modal="true" />
                                    </MudPaper>                                        
                                    <MudPaper Elevation="0" Class="p-0" Style="width: 300px;">     
                                        <MudSelect T="string"
                                            @bind-Value="employee.JobTitleDesc" 
                                            For="@(() => employee.JobTitleDesc)"
                                            Label="Job Title" 
                                            Variant="Variant.Text" 
                                            Margin="Margin.Dense" 
                                            Placeholder="Please Select" 
                                            AdornmentIcon="@Icons.Material.Filled.ArrowDropDown" 
                                            AdornmentColor="Color.Default"
                                            HelperText="Select job title" 
                                            HelperTextOnFocus="true" 
                                            Clearable="@_isCboClearable" 
                                            Disabled="@_isDisabled"
                                            Immediate="true" 
                                            Typo="Typo.subtitle2">
                                            @foreach (var job in _jobTitleList)
                                            {
                                                <MudSelectItem Value="job.UDCDesc1">@job.UDCDesc1</MudSelectItem>
                                            }
                                        </MudSelect>     
                                        @* <MudAutocomplete @bind-Value="employee.JobTitleDesc"
                                            For="@(() => employee.JobTitleDesc)"
                                            Class="employee-autocomplete"
                                            SearchFunc="SearchJobTitle!"
                                            Variant="Variant.Text"
                                            Label="Job Title"
                                            Margin="Margin.Dense"
                                            Dense="true"
                                            Placeholder="Please Select"
                                            HelperText="Type a key to search for value"
                                            HelperTextOnFocus="true"
                                            Clearable="@_isCboClearable" 
                                            Typo="Typo.subtitle2"
                                            Disabled="@_isDisabled"
                                            MaxItems="@(_jobTitleList != null ? _jobTitleList.Count : 10)"
                                            Modal="true" /> *@
                                    </MudPaper>
                                    <MudPaper Elevation="0" Class="p-0" Style="width: 300px;">
                                        <MudAutocomplete @bind-Value="employee.PayGradeDesc"
                                            For="@(() => employee.PayGradeDesc)"
                                            Class="employee-autocomplete"
                                            SearchFunc="SearchPayGrade!"
                                            Variant="Variant.Text"
                                            Label="Pay Grade"
                                            Margin="Margin.Dense"
                                            Dense="true"
                                            Placeholder="Please Select"
                                            HelperText="Type a key to search for value"
                                            HelperTextOnFocus="true"
                                            Clearable="@_isCboClearable" 
                                            Typo="Typo.subtitle2"
                                            Disabled="@_isDisabled"
                                            MaxItems="@(_payGradeList != null ? _payGradeList.Count : 10)"
                                            Modal="true" />
                                    </MudPaper>
                                    <MudFlexBreak />
                                    <MudPaper Elevation="0" Class="p-0"  Style="width: 300px;">
                                        <MudAutocomplete @bind-Value="employee.EmploymentType"
                                            For="@(() => employee.EmploymentType)"
                                            Class="employee-autocomplete"
                                            SearchFunc="SearchEmploymentType!"
                                            Variant="Variant.Text"
                                            Label="Employment Type"
                                            Margin="Margin.Dense"
                                            Dense="true"
                                            Placeholder="Please Select"
                                            HelperText="Type a key to search for value"
                                            HelperTextOnFocus="true"
                                            Clearable="@_isCboClearable" 
                                            Typo="Typo.subtitle2"
                                            Disabled="@_isDisabled"
                                            MaxItems="@(_employmentTypeList != null ? _employmentTypeList.Count : 10)"
                                            Modal="true" />
                                    </MudPaper> 
                                    <MudPaper Elevation="0" Class="p-0"  Style="width: 300px;">
                                        <MudAutocomplete @bind-Value="employee.RoleType"
                                            For="@(() => employee.RoleType)"
                                            Class="employee-autocomplete"
                                            SearchFunc="SearchRoleType!"
                                            Variant="Variant.Text"
                                            Label="Role Type"
                                            Margin="Margin.Dense"
                                            Dense="true"
                                            Placeholder="Please Select"
                                            HelperText="Type a key to search for value"
                                            HelperTextOnFocus="true"
                                            Clearable="@_isCboClearable" 
                                            Typo="Typo.subtitle2"
                                            Disabled="@_isDisabled"
                                            MaxItems="@(_roleTypeList != null ? _roleTypeList.Count : 10)"
                                            Modal="true" />
                                    </MudPaper> 
                                    <MudPaper Elevation="0" Class="p-0"  Style="width: 300px;">
                                        <MudAutocomplete @bind-Value="employee.FirstAttendanceMode"
                                            For="@(() => employee.FirstAttendanceMode)"
                                            Class="employee-autocomplete"
                                            SearchFunc="SearchAttendanceMode!"
                                            Variant="Variant.Text"
                                            Label="First Attendance Mode"
                                            Margin="Margin.Dense"
                                            Dense="true"
                                            Placeholder="Please Select"
                                            HelperText="Type a key to search for value"
                                            HelperTextOnFocus="true"
                                            Clearable="@_isCboClearable" 
                                            Typo="Typo.subtitle2"
                                            Disabled="@_isDisabled"
                                            MaxItems="@(_attendanceModeList != null ? _attendanceModeList.Count : 10)"
                                            Modal="true" />
                                    </MudPaper> 
                                    <MudFlexBreak />
                                    <MudPaper Elevation="0" Class="p-0" Style="width: 300px;">
                                        <MudAutocomplete @bind-Value="employee.SecondAttendanceMode"
                                                         For="@(() => employee.SecondAttendanceMode)"
                                                         Class="employee-autocomplete"
                                                         SearchFunc="SearchAttendanceMode!"
                                                         Variant="Variant.Text"
                                                         Label="Second Attendance Mode"
                                                         Margin="Margin.Dense"
                                                         Dense="true"
                                                         Placeholder="Please Select"
                                                         HelperText="Type a key to search for value"
                                                         HelperTextOnFocus="true"
                                                         Clearable="@_isCboClearable"
                                                         Typo="Typo.subtitle2"
                                                         Disabled="@_isDisabled"
                                                         MaxItems="@(_attendanceModeList != null ? _attendanceModeList.Count : 10)"
                                                         Modal="true" />
                                    </MudPaper>
                                    <MudPaper Elevation="0" Class="p-0" Style="width: 300px;">
                                        <MudAutocomplete @bind-Value="employee.ThirdAttendanceMode"
                                                         For="@(() => employee.ThirdAttendanceMode)"
                                                         Class="employee-autocomplete"
                                                         SearchFunc="SearchAttendanceMode!"
                                                         Variant="Variant.Text"
                                                         Label="Third Attendance Mode"
                                                         Margin="Margin.Dense"
                                                         Dense="true"
                                                         Placeholder="Please Select"
                                                         HelperText="Type a key to search for value"
                                                         HelperTextOnFocus="true"
                                                         Clearable="@_isCboClearable"
                                                         Typo="Typo.subtitle2"
                                                         Disabled="@_isDisabled"
                                                         MaxItems="@(_attendanceModeList != null ? _attendanceModeList.Count : 10)"
                                                         Modal="true" />
                                    </MudPaper>
                                    <MudPaper Elevation="0" Class="p-0" Style="width: 300px;" />
                                </MudStack>
                            </ChildContent>
                        </MudExpansionPanel>
                        <MudExpansionPanel Class="pt-0 mt-0" Dense Gutters>
                            <TitleContent>
                                <div class="d-flex">
                                    <MudIcon Icon="fas fa-university" class="mr-3 pt-1" Style="font-size: 20px; color: #004165;"></MudIcon>
                                    <MudText Typo="Typo.subtitle1" Style="text-decoration: underline; color: #004165;"><strong>Bank Details</strong></MudText>
                                </div>
                            </TitleContent>
                            <ChildContent>
                                <MudStack Row="true" AlignItems="AlignItems.Start" Spacing="4" Wrap="Wrap.Wrap" Justify="Justify.FlexStart" StretchItems="StretchItems.All">
                                    <MudPaper Elevation="0" Class="p-0" Style="width: 300px;">
                                        <MudAutocomplete @bind-Value="employee.AccountTypeDesc"
                                            For="@(() => employee.AccountTypeDesc)"
                                            Class="employee-autocomplete"
                                            SearchFunc="SearchAccountType!"
                                            Variant="Variant.Text"
                                            Label="Account Type"
                                            Margin="Margin.Dense"
                                            Dense="true"
                                            Placeholder="Please Select"
                                            HelperText="Type a key to search for value"
                                            HelperTextOnFocus="true"
                                            Clearable="@_isCboClearable" 
                                            Typo="Typo.subtitle2"
                                            Disabled="@_isDisabled"
                                            Modal="true" />
                                    </MudPaper>
                                    <MudPaper Elevation="0" Class="p-0" Style="width: 300px;">
                                        <MudTextField @bind-Value="employee.AccountNumber" Label="Account Number" 
                                            For="@(() => employee.AccountNumber)"
                                            HelperText="Input must not exceed 30 chars." Variant="Variant.Text" HelperTextOnFocus="true"
                                            Clearable="@_isClearable" Disabled="@_isDisabled" Immediate="true" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                    </MudPaper>
                                    <MudPaper Elevation="0" Class="p-0" Style="width: 300px;">
                                        <MudTextField @bind-Value="employee.AccountHolderName" Label="Account Holder Name" 
                                            For="@(() => employee.AccountHolderName)"
                                            HelperText="Input must not exceed 50 chars." Variant="Variant.Text" HelperTextOnFocus="true"
                                            Clearable="@_isClearable" Disabled="@_isDisabled" Immediate="true" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                    </MudPaper>                                
                                    <MudPaper Elevation="0" Class="p-0" Style="width: 300px;">                                    
                                        <MudAutocomplete @bind-Value="employee.BankName"
                                            For="@(() => employee.BankName)"
                                            Class="employee-autocomplete"
                                            SearchFunc="SearchBankName!"
                                            Variant="Variant.Text"
                                            Label="Bank Name"
                                            Margin="Margin.Dense"
                                            Dense="true"
                                            Placeholder="Please Select"
                                            HelperText="Type a key to search for value"
                                            HelperTextOnFocus="true"
                                            Clearable="@_isCboClearable" 
                                            Typo="Typo.subtitle2"
                                            Disabled="@_isDisabled"
                                            Modal="true" />
                                    </MudPaper>
                                    <MudFlexBreak />
                                    <MudPaper Elevation="0" Class="p-0" Style="width: 300px;">
                                        <MudTextField @bind-Value="employee.BankBranchName" Label="Branch Name" 
                                            For="@(() => employee.BankBranchName)"
                                            Variant="Variant.Text"
                                            HelperText="Input must not exceed 150 chars." Counter="150" MaxLength="150" HelperTextOnFocus="true"
                                            Clearable="@_isClearable" Disabled="@_isDisabled" Immediate="true" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                    </MudPaper>
                                    <MudPaper Elevation="0" Class="p-0" Style="width: 300px;">
                                        <MudTextField @bind-Value="employee.IBANNumber" Label="IBAN Number" 
                                            For="@(() => employee.IBANNumber)"
                                            HelperText="Input must not exceed 30 chars." Variant="Variant.Text" HelperTextOnFocus="true"
                                            Clearable="@_isClearable" Disabled="@_isDisabled" Immediate="true" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                    </MudPaper>
                                    <MudPaper Elevation="0" Class="p-0" Style="width: 300px;">
                                        <MudTextField @bind-Value="employee.TaxNumber" Label="Tax Number" 
                                            For="@(() => employee.TaxNumber)"
                                            HelperText="Input must not exceed 40 chars." Variant="Variant.Text" HelperTextOnFocus="true"
                                            Clearable="@_isClearable" Disabled="@_isDisabled" Immediate="true" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                    </MudPaper>
                                    <MudPaper Elevation="0" Class="p-0" Style="width: 300px;" />
                                </MudStack>
                            </ChildContent>
                        </MudExpansionPanel>
                        <MudExpansionPanel Class="pt-0 mt-0 pb-4" Dense Gutters>
                            <TitleContent>
                                <div class="d-flex">
                                    <MudIcon Icon="fas fa-user-circle" class="mr-3 pt-1" Style="font-size: 20px; color: #004165;"></MudIcon>
                                    <MudText Typo="Typo.subtitle1" Style="text-decoration: underline; color: #004165;"><strong>Social Connect</strong></MudText>
                                </div>
                            </TitleContent>
                            <ChildContent>
                                <MudStack Row="true" AlignItems="AlignItems.Start" Spacing="4" Wrap="Wrap.Wrap" Justify="Justify.FlexStart" StretchItems="StretchItems.All">
                                    <MudPaper Elevation="0" Class="p-0" Style="width: 200px;">
                                        <MudTextField @bind-Value="employee.LinkedInAccount" Label="Linked In" 
                                            For="@(() => employee.LinkedInAccount)"
                                            HelperText="Max. text input is 40 chars." Variant="Variant.Filled" HelperTextOnFocus="true"
                                            Clearable="@_isClearable" Disabled="@_isDisabled" Immediate="true" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                    </MudPaper>
                                    <MudPaper Elevation="0" Class="p-0">
                                        <MudTextField @bind-Value="employee.FacebookAccount" Label="Facebook" 
                                            For="@(() => employee.FacebookAccount)"
                                            HelperText="Max. text input is 40 chars." Variant="Variant.Filled" HelperTextOnFocus="true"
                                            Clearable="@_isClearable" Disabled="@_isDisabled" Immediate="true" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                    </MudPaper>
                                    <MudPaper Elevation="0" Class="p-0">
                                        <MudTextField @bind-Value="employee.TwitterAccount" Label="Twitter" 
                                            For="@(() => employee.TwitterAccount)"
                                            HelperText="Max. text input is 40 chars." Variant="Variant.Filled" HelperTextOnFocus="true"
                                            Clearable="@_isClearable" Disabled="@_isDisabled" Immediate="true" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                    </MudPaper>
                                    <MudPaper Elevation="0" Class="p-0">
                                         <MudTextField @bind-Value="employee.InstagramAccount" Label="Instagram" 
                                            For="@(() => employee.InstagramAccount)"
                                            HelperText="Max. text input is 40 chars." Variant="Variant.Filled" HelperTextOnFocus="true"
                                            Clearable="@_isClearable" Disabled="@_isDisabled" Immediate="true" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                    </MudPaper>
                                </MudStack>
                            </ChildContent>
                        </MudExpansionPanel>                 
                        <MudScrollToTop TopOffset="100"
                                         Selector="#aboutMePanel"
                                         VisibleCssClass="visible absolute"
                                         HiddenCssClass="hidden absolute">
                             <MudButton Variant="Variant.Filled" StartIcon="@Icons.Material.Filled.ArrowUpward" Color="Color.Error">Go to top</MudButton>
                         </MudScrollToTop>
                    </MudExpansionPanels>
                 </div>
            </MudTabPanel>
            <MudTabPanel Text="Address" ToolTip="Manage address and location" Icon="@Icons.Material.Rounded.LocationOn">
                <div id="addressPanel" class="ma-0 full-height" style="overflow-y: scroll; scrollbar-width: none;">
                    <MudExpansionPanels Elevation="0" MultiExpansion="true">
                        <MudExpansionPanel Class="pt-0 mt-0 pb-4" Dense Gutters Expanded>
                            <TitleContent>
                                <div class="d-flex">
                                    <MudIcon Icon="fas fa-map-marker-alt" class="mr-1 pt-1" Style="font-size: 20px; color: #004165;"></MudIcon>
                                    <MudText Typo="Typo.subtitle1" Style="text-decoration: underline; color: #004165;"><strong>Present Address</strong></MudText>
                                </div>
                            </TitleContent>
                            <ChildContent>
                                <MudGrid Spacing="0">
                                    <MudItem xs="12">
                                        <MudStack Row="true" AlignItems="AlignItems.Stretch" Spacing="0" Wrap="Wrap.NoWrap">
                                            <MudPaper Elevation="0" Class="p-0 w-100">
                                                <MudTextField @bind-Value="employee.PresentAddress" Label="Address" 
                                                    For="@(() => employee.PresentAddress)"
                                                    HelperText="Max. text input is 300 chars."
                                                    Variant="Variant.Filled" HelperTextOnFocus="true" Counter="300" MaxLength="300" Lines="3"
                                                    Clearable="@_isClearable" Disabled="@_isDisabled" Immediate="true" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                            </MudPaper>
                                        </MudStack>
                                    </MudItem>
                                </MudGrid>
                                <MudGrid Spacing="5">
                                    <MudItem xs="12" sm="6" md="4">
                                        <MudPaper Elevation="0" Class="p-0 w-100">
                                            @* <MudSelect @bind-Value="employee.PresentCountryCode" Variant="Variant.Text" Margin="Margin.Dense" Label="Country"
                                                Placeholder="Please Select" AdornmentIcon="@Icons.Material.Filled.ArrowDropDown" AdornmentColor="Color.Default"
                                                HelperText="Allows only 1 selection" HelperTextOnFocus="true" Clearable="@_isClearable" Disabled="@_isDisabled" Immediate="true" Typo="Typo.subtitle2">
                                                @foreach (var state in _states)
                                                {
                                                    <MudSelectItem Value="state">@state</MudSelectItem>
                                                }
                                            </MudSelect> *@
                                            <MudAutocomplete @bind-Value="employee.PresentCountryDesc"
                                                            For="@(() => employee.PresentCountryDesc)"
                                                             Class="employee-autocomplete"
                                                             SearchFunc="SearchCountry!"
                                                             Variant="Variant.Text"
                                                             Label="Country"
                                                             Margin="Margin.Dense"
                                                             Dense="true"
                                                             Placeholder="Please Select"
                                                             HelperText="Type a key to search for value"
                                                             HelperTextOnFocus="true"
                                                             Clearable="@_isCboClearable" 
                                                             Typo="Typo.subtitle2"
                                                             MaxItems="@(_countryList != null ? _countryList.Count : 10)"
                                                             Disabled="@_isDisabled"
                                                             Modal="true" />
                                        </MudPaper>
                                    </MudItem>
                                    <MudItem xs="12" sm="6" md="4">
                                        <MudPaper Elevation="0" Class="p-0 w-100">
                                            <MudTextField @bind-Value="employee.PresentCity" Label="City" 
                                                For="@(() => employee.PresentCity)"
                                                HelperText="Max. text input is 100 chars."
                                                Variant="Variant.Text" HelperTextOnFocus="true" Counter="100" MaxLength="100" 
                                                Clearable="@_isClearable" Disabled="@_isDisabled" Immediate="true" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                        </MudPaper>
                                    </MudItem>
                                    <MudItem xs="12" sm="6" md="4">
                                        <MudPaper Elevation="0" Class="p-0 w-100">
                                            <MudTextField @bind-Value="employee.PresentAreaCode" Label="Area Code" 
                                                For="@(() => employee.PresentAreaCode)"
                                                HelperText="Max. text input is 20 chars."
                                                Variant="Variant.Text" HelperTextOnFocus="true" Counter="20" MaxLength="20" 
                                                Clearable="@_isClearable" Disabled="@_isDisabled" Immediate="true" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                        </MudPaper>
                                    </MudItem>
                                </MudGrid>
                                <MudGrid Spacing="5">
                                    <MudItem xs="12" sm="6" md="4">
                                        <MudPaper Elevation="0" Class="p-0 w-100">
                                            <MudTextField @bind-Value="employee.PresentContactNo" Label="Contact No." 
                                                For="@(() => employee.PresentContactNo)"
                                                HelperText="Max. text input is 20 chars."
                                                Variant="Variant.Text" HelperTextOnFocus="true" Counter="20" MaxLength="20"
                                                Clearable="@_isClearable" Disabled="@_isDisabled" Immediate="true" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                        </MudPaper>
                                    </MudItem>
                                    <MudItem xs="12" sm="6" md="4">
                                        <MudPaper Elevation="0" Class="p-0 w-100">
                                            <MudTextField @bind-Value="employee.PresentMobileNo" Label="Mobile No." 
                                                For="@(() => employee.PresentMobileNo)"
                                                HelperText="Max. text input is 20 chars."
                                                Variant="Variant.Text" HelperTextOnFocus="true" Counter="20" MaxLength="20"
                                                Clearable="@_isClearable" Disabled="@_isDisabled" Immediate="true" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                        </MudPaper>
                                    </MudItem>
                                </MudGrid>
                            </ChildContent>
                        </MudExpansionPanel>
                        <MudExpansionPanel Class="p-0 m-0" Dense Gutters Expanded>
                            <TitleContent>
                                <div class="d-flex">
                                    <MudIcon Icon="fas fa-house-user" class="mr-3 pt-1" Style="font-size: 20px; color: #004165;"></MudIcon>
                                    <MudText Typo="Typo.subtitle1" Style="text-decoration: underline; color: #004165;"><strong>Permanent Address</strong></MudText>
                                </div>
                            </TitleContent>
                            <ChildContent>
                                <MudGrid Spacing="0">
                                    <MudItem xs="12">
                                        <MudStack Row="true" AlignItems="AlignItems.Stretch" Spacing="0" Wrap="Wrap.NoWrap">
                                            <MudPaper Elevation="0" Class="p-0 w-100">
                                                <MudTextField @bind-Value="employee.PermanentAddress" Label="Address" 
                                                    For="@(() => employee.PermanentAddress)"
                                                    HelperText="Max. text input is 300 chars."
                                                              Variant="Variant.Filled" HelperTextOnFocus="true" Counter="300" MaxLength="300" Lines="3"
                                                    Clearable="@_isClearable" Disabled="@_isDisabled" Immediate="true" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                            </MudPaper>
                                        </MudStack>
                                    </MudItem>
                                </MudGrid>
                                <MudGrid Spacing="4">
                                    <MudItem xs="12" sm="6" md="4">
                                        <MudPaper Elevation="0" Class="p-0 w-100">
                                            <MudAutocomplete @bind-Value="employee.PermanentCountryDesc"
                                                        For="@(() => employee.PermanentCountryDesc)"
                                                        Class="employee-autocomplete"
                                                        SearchFunc="SearchCountry!"
                                                        Variant="Variant.Text"
                                                        Label="Country"
                                                        Margin="Margin.Dense"
                                                        Dense="true"
                                                        Placeholder="Please Select"
                                                        HelperText="Type a key to search for value"
                                                        HelperTextOnFocus="true"
                                                        Clearable="@_isCboClearable" 
                                                        Typo="Typo.subtitle2"
                                                        MaxItems="@(_countryList != null ? _countryList.Count : 10)"
                                                        Disabled="@_isDisabled"
                                                        Modal="true" />
                                        </MudPaper>
                                    </MudItem>
                                    <MudItem xs="12" sm="6" md="4">
                                        <MudPaper Elevation="0" Class="p-0 w-100">
                                            <MudTextField @bind-Value="employee.PermanentCity" Label="City" 
                                                For="@(() => employee.PermanentCity)"
                                                HelperText="Max. text input is 100 chars."
                                                Variant="Variant.Text" HelperTextOnFocus="true" Counter="100" MaxLength="100" 
                                                Clearable="@_isClearable" Disabled="@_isDisabled" Immediate="true" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                        </MudPaper>
                                    </MudItem>
                                    <MudItem xs="12" sm="6" md="4">
                                        <MudPaper Elevation="0" Class="p-0 w-100">
                                            <MudTextField @bind-Value="employee.PermanentAreaCode" Label="Area Code" 
                                                For="@(() => employee.PermanentAreaCode)"
                                                HelperText="Max. text input is 20 chars."
                                                Variant="Variant.Text" HelperTextOnFocus="true" Counter="20" MaxLength="20" 
                                                Clearable="@_isClearable" Disabled="@_isDisabled" Immediate="true" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                        </MudPaper>
                                    </MudItem>
                                </MudGrid>
                                <MudGrid Spacing="4">
                                    <MudItem xs="12" sm="6" md="4">
                                        <MudPaper Elevation="0" Class="p-0 w-100">
                                            <MudTextField @bind-Value="employee.PermanentContactNo" Label="Contact No." 
                                                For="@(() => employee.PermanentContactNo)"
                                                HelperText="Max. text input is 20 chars."
                                                Variant="Variant.Text" HelperTextOnFocus="true" Counter="20" MaxLength="20"
                                                Clearable="@_isClearable" Disabled="@_isDisabled" Immediate="true" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                        </MudPaper>
                                    </MudItem>
                                    <MudItem xs="12" sm="6" md="4">
                                        <MudPaper Elevation="0" Class="p-0 w-100">
                                            <MudTextField @bind-Value="employee.PermanentMobileNo" Label="Mobile No."
                                                          For="@(() => employee.PermanentMobileNo)"
                                                HelperText="Max. text input is 20 chars."
                                                Variant="Variant.Text" HelperTextOnFocus="true" Counter="20" MaxLength="20"
                                                Clearable="@_isClearable" Disabled="@_isDisabled" Immediate="true" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                        </MudPaper>
                                    </MudItem>
                                </MudGrid>
                            </ChildContent>
                        </MudExpansionPanel>
                        <MudExpansionPanel Class="pt-0 mt-0" Dense Gutters>
                            <TitleContent>
                                <div class="d-flex">
                                    <MudIcon Icon="fas fa-mobile-alt" class="mr-3 pt-1" Style="font-size: 20px; color: #004165;"></MudIcon>
                                    <MudText Typo="Typo.subtitle1" Style="text-decoration: underline; color: #004165;"><strong>Emergency Contacts</strong></MudText>
                                </div>
                            </TitleContent>
                            <ChildContent>
                                <MudPaper Elevation="4" Square="true" Class="w-100">                            
                                    <MudDataGrid T="EmergencyContactDTO" Items="@employee.EmergencyContactList" Hover="true" Striped="true" Class="emergency-contact-grid"
                                        Filterable="@_emergencyFilter" FilterMode="@DataGridFilterMode.ColumnFilterMenu" FilterCaseSensitivity="@DataGridFilterCaseSensitivity.CaseInsensitive"
                                        QuickFilter="@_emergencyQuickFilter" Hideable="true" PageSize="5"
                                        EditTrigger="DataGridEditTrigger.Manual" ReadOnly="false" EditMode="DataGridEditMode.Form"
                                        EditDialogOptions="new DialogOptions 
                                        { 
                                            MaxWidth = MaxWidth.Small, 
                                            FullWidth = true,
                                            BackdropClick = false,
                                            CloseOnEscapeKey = false
                                        }"
                                        StartedEditingItem="@EmergencyStartedEditingItem" CommittedItemChanges="@EmergencyCommittedItemChanges"
                                        TableLayout="TableLayout.Fixed" Dense="true" ColumnResizeMode="ResizeMode.Column" HorizontalScrollbar="true">
                                        <Columns>
                                            <PropertyColumn Property="x => x.ContactPerson" Title="Contact Person" Class="col-contact-person" />
                                            <PropertyColumn Property="x => x.Address" Class="col-contact-address" />
                                            <PropertyColumn Property="x => x.Relation" Title="Relationship" Class="col-relationship" />
                                            <PropertyColumn Property="x => x.CountryDesc" Title="Country" />
                                            <PropertyColumn Property="x => x.City" Title="City" />
                                            <PropertyColumn Property="x => x.MobileNo" Title="Mobile No." />
                                            <PropertyColumn Property="x => x.LandlineNo" Title="Landline No." />
                                            <TemplateColumn Hidden="false" CellClass="d-flex justify-end">
                                                    <CellTemplate Context="row">
                                                    <MudIconButton Color="Color.Info" title="Edit record" Class="show-btn fa-icon-btn" OnClick="@row.Actions.StartEditingItemAsync">
                                                        <ChildContent>
                                                            ,<i class="fas fa-edit fa-1x"></i>
                                                        </ChildContent>
                                                    </MudIconButton>
                                                    <MudIconButton Color="Color.Error" title="Delete selected emergency contact" Class="fa-icon-btn" OnClick="() => ConfirmDeleteEmergency(row.Item)">
                                                        <ChildContent>
                                                            <i class="fas fa-trash-alt fa-1x"></i>
                                                        </ChildContent>
                                                    </MudIconButton>
                                                </CellTemplate>
                                            </TemplateColumn>
                                        </Columns>
                                        <NoRecordsContent>
			                                 <div class="no-data-box">
				                                 <MudIcon Icon="@Icons.Material.Filled.Info" Class="no-data-icon" />
				                                 <span>No data found</span>
			                                 </div>
		                                </NoRecordsContent>
                                    </MudDataGrid>
                                </MudPaper>
                            </ChildContent>
                        </MudExpansionPanel>
                        <MudScrollToTop TopOffset="100"
                                        Selector="#addressPanel"
                                         VisibleCssClass="visible absolute"
                                         HiddenCssClass="hidden absolute">
                            <MudButton Variant="Variant.Filled" StartIcon="@Icons.Material.Filled.ArrowUpward" Color="Color.Error">Go to top</MudButton>
                         </MudScrollToTop>
                    </MudExpansionPanels>  
                </div>
            </MudTabPanel>
            <MudTabPanel Text="Identity Proofs" ToolTip="Manage employee details" Icon="@Icons.Material.Rounded.PermIdentity">
                <div id="identityPanel" class="ma-0 full-height" style="overflow-y: scroll; scrollbar-width: none;">
                    <MudExpansionPanels Elevation="0" MultiExpansion="true">
                        <MudExpansionPanel Class="p-0 m-0" Dense Gutters Expanded>
                            <TitleContent>
                                <div class="d-flex">
                                    <MudIcon Icon="fas fa-id-card" class="mr-3 pt-1" Style="font-size: 20px; color: #004165;"></MudIcon>
                                    <MudText Typo="Typo.subtitle1" Style="text-decoration: underline; color: #004165;"><strong>Passport Details</strong></MudText>
                                </div>
                            </TitleContent>
                            <ChildContent>
                                <MudGrid Spacing="5">
                                    <MudItem xs="3">
                                        <MudPaper Elevation="0" Class="p-0 w-100">
                                            <MudTextField @bind-Value="employee.EmpIdentityProof.PassportNumber" Label="Passport Number" HelperText="Max. text input is 20 chars."
                                                Variant="Variant.Text" HelperTextOnFocus="true" Counter="20" MaxLength="20" 
                                                Clearable="@_isClearable" Disabled="@_isDisabled" Immediate="true" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                        </MudPaper>
                                    </MudItem>
                                     <MudItem xs="4">
                                        <MudPaper Elevation="0" Class="p-0 w-100">
                                            <MudTextField @bind-Value="employee.EmpIdentityProof.PlaceOfIssue" Label="Place of Issue" HelperText="Max. text input is 20 chars."
                                                Variant="Variant.Text" HelperTextOnFocus="true"Counter="100" MaxLength="100" 
                                                Clearable="@_isClearable" Disabled="@_isDisabled" Immediate="true" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                        </MudPaper>
                                    </MudItem>
                                    <MudItem xs="2">
                                        <MudPaper Elevation="0" Class="p-0 w-100">
                                            <MudDatePicker Label="Date of Issue" Editable="true" @bind-Date="employee.EmpIdentityProof.DateOfIssue" Margin="Margin.Dense" AutoClose="true" 
                                                HelperText="Enter date in dd/MM/yyyy format" HelperTextOnFocus="true" Clearable="@_isCboClearable" Disabled="@_isDisabled"
                                                Mask="@(new DateMask("dd/MM/yyyy"))" DateFormat="dd/MM/yyyy" Placeholder="dd/MM/yyyy" Variant="Variant.Text">
                                                <PickerActions Context="dateContext">
                                                    <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="@(async () => await this.InvokeAsync(() => employee.EmpIdentityProof.DateOfIssue = DateTime.Today))">Today</MudButton>
                                                    <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="@(async () => await this.InvokeAsync(() => employee.EmpIdentityProof.DateOfIssue = null))">Clear</MudButton>
                                                </PickerActions>
                                            </MudDatePicker>
                                        </MudPaper>
                                    </MudItem>
                                    <MudItem xs="2">
                                        <MudPaper Elevation="0" Class="p-0 w-100">
                                            <MudDatePicker Label="Date of Expiry" Editable="true" @bind-Date="employee.EmpIdentityProof.DateOfExpiry" Margin="Margin.Dense" AutoClose="true" 
                                                HelperText="Enter date in dd/MM/yyyy format" HelperTextOnFocus="true" Clearable="@_isCboClearable" Disabled="@_isDisabled"
                                                Mask="@(new DateMask("dd/MM/yyyy"))" DateFormat="dd/MM/yyyy" Placeholder="dd/MM/yyyy" Variant="Variant.Text">
                                                <PickerActions Context="dateContext">
                                                    <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="@(async () => await this.InvokeAsync(() => employee.EmpIdentityProof.DateOfExpiry = DateTime.Today))">Today</MudButton>
                                                    <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="@(async () => await this.InvokeAsync(() => employee.EmpIdentityProof.DateOfExpiry = null))">Clear</MudButton>
                                                </PickerActions>
                                            </MudDatePicker>
                                        </MudPaper>
                                    </MudItem>
                                </MudGrid>
                            </ChildContent>
                        </MudExpansionPanel>
                        <MudExpansionPanel Class="p-0 m-0" Dense Gutters Expanded>
                            <TitleContent>
                                <div class="d-flex">
                                    <MudIcon Icon="fas fa-car" class="mr-3 pt-1" Style="font-size: 20px; color: #004165"></MudIcon>
                                    <MudText Typo="Typo.subtitle1" Style="text-decoration: underline; color: #004165;"><strong>Driving License</strong></MudText>
                                </div>
                            </TitleContent>
                            <ChildContent>
                                <MudGrid Spacing="5">
                                    <MudItem xs="3">
                                        <MudPaper Elevation="0" Class="p-0 w-100">
                                            <MudTextField @bind-Value="employee.EmpIdentityProof.DrivingLicenseNo" Label="Driving License No." HelperText="Max. text input is 20 chars."
                                                Variant="Variant.Text" HelperTextOnFocus="true" Counter="20" MaxLength="20" 
                                                Clearable="@_isClearable" Disabled="@_isDisabled" Immediate="true" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                        </MudPaper>
                                    </MudItem>
                                     <MudItem xs="4">
                                        <MudPaper Elevation="0" Class="p-0 w-100">
                                            <MudTextField @bind-Value="employee.EmpIdentityProof.DLPlaceOfIssue" Label="Place of Issue" HelperText="Max. text input is 20 chars."
                                                Variant="Variant.Text" HelperTextOnFocus="true"Counter="100" MaxLength="100" 
                                                Clearable="@_isClearable" Disabled="@_isDisabled" Immediate="true" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                        </MudPaper>
                                    </MudItem>
                                    <MudItem xs="2">
                                        <MudPaper Elevation="0" Class="p-0 w-100">
                                            <MudDatePicker Label="Date of Issue" Editable="true" @bind-Date="employee.EmpIdentityProof.DLDateOfIssue" Margin="Margin.Dense" AutoClose="true" 
                                                HelperText="Enter date in dd/MM/yyyy format" HelperTextOnFocus="true" Clearable="@_isCboClearable" Disabled="@_isDisabled"
                                                Mask="@(new DateMask("dd/MM/yyyy"))" DateFormat="dd/MM/yyyy" Placeholder="dd/MM/yyyy" Variant="Variant.Text">
                                                <PickerActions Context="dateContext">
                                                    <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="@(async () => await this.InvokeAsync(() => employee.EmpIdentityProof.DLDateOfIssue = DateTime.Today))">Today</MudButton>
                                                    <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="@(async () => await this.InvokeAsync(() => employee.EmpIdentityProof.DLDateOfIssue = null))">Clear</MudButton>
                                                </PickerActions>
                                            </MudDatePicker>
                                        </MudPaper>
                                    </MudItem>
                                    <MudItem xs="2">
                                        <MudPaper Elevation="0" Class="p-0 w-100">
                                            <MudDatePicker Label="Date of Expiry" Editable="true" @bind-Date="employee.EmpIdentityProof.DLDateOfExpiry" Margin="Margin.Dense" AutoClose="true" 
                                                HelperText="Enter date in dd/MM/yyyy format" HelperTextOnFocus="true" Clearable="@_isCboClearable" Disabled="@_isDisabled"
                                                Mask="@(new DateMask("dd/MM/yyyy"))" DateFormat="dd/MM/yyyy" Placeholder="dd/MM/yyyy" Variant="Variant.Text">
                                                <PickerActions Context="dateContext">
                                                    <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="@(async () => await this.InvokeAsync(() => employee.EmpIdentityProof.DLDateOfExpiry = DateTime.Today))">Today</MudButton>
                                                    <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="@(async () => await this.InvokeAsync(() => employee.EmpIdentityProof.DLDateOfExpiry = null))">Clear</MudButton>
                                                </PickerActions>
                                            </MudDatePicker>
                                        </MudPaper>
                                    </MudItem>
                                </MudGrid>
                            </ChildContent>
                        </MudExpansionPanel>
                        <MudExpansionPanel Class="p-0 m-0" Dense Gutters>
                            <TitleContent>
                                <div class="d-flex">
                                    <MudIcon Icon="fas fa-id-card" class="mr-3 pt-1" Style="font-size: 20px; color: #004165"></MudIcon>
                                    <MudText Typo="Typo.subtitle1" Style="text-decoration: underline; color: #004165;"><strong>National ID</strong></MudText>
                                </div>
                            </TitleContent>
                            <ChildContent>
                                <MudGrid Spacing="5">
                                    <MudItem xs="3">
                                        <MudPaper Elevation="0" Class="p-0 w-100">
                                            <MudTextField @bind-Value="employee.EmpIdentityProof.NationalIDNumber" Label="National ID No." HelperText="Max. text input is 20 chars."
                                                          Variant="Variant.Text" HelperTextOnFocus="true" Counter="20" MaxLength="20"
                                                          Clearable="@_isClearable" Disabled="@_isDisabled" Immediate="true" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                        </MudPaper>
                                    </MudItem>
                                    <MudItem xs="3">
                                        <MudPaper Elevation="0" Class="p-0 w-100">
                                            <MudTextField @bind-Value="employee.EmpIdentityProof.NatIDPlaceOfIssue" Label="Place of Issue" HelperText="Max. text input is 20 chars."
                                                          Variant="Variant.Text" HelperTextOnFocus="true" Counter="100" MaxLength="100"
                                                          Clearable="@_isClearable" Disabled="@_isDisabled" Immediate="true" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                        </MudPaper>
                                    </MudItem>
                                    <MudItem xs="2">
                                        <MudPaper Elevation="0" Class="p-0 w-100">
                                            <MudAutocomplete @bind-Value="employee.EmpIdentityProof.NationalIDTypeDesc"
                                                             Class="employee-autocomplete"
                                                             SearchFunc="SearchCountry!"
                                                             Variant="Variant.Text"
                                                             Label="National ID Type"
                                                             Margin="Margin.Dense"
                                                             Dense="true"
                                                             Placeholder="Please Select"
                                                             HelperText="Type a key to search for value"
                                                             HelperTextOnFocus="true"
                                                             Clearable="@_isCboClearable" 
                                                             Typo="Typo.subtitle2"
                                                             MaxItems="@(_countryList != null ? _countryList.Count : 10)"
                                                             Disabled="@_isDisabled"
                                                             Modal="true" />
                                        </MudPaper>
                                    </MudItem>     
                                    <MudItem xs="2">
                                        <MudPaper Elevation="0" Class="p-0 w-100">
                                            <MudDatePicker Label="Date of Issue" Editable="true" @bind-Date="employee.EmpIdentityProof.NatIDDateOfIssue" Margin="Margin.Dense" AutoClose="true" 
                                                HelperText="Enter date in dd/MM/yyyy format" HelperTextOnFocus="true" Clearable="@_isCboClearable" Disabled="@_isDisabled" 
                                                Mask="@(new DateMask("dd/MM/yyyy"))" DateFormat="dd/MM/yyyy" Placeholder="dd/MM/yyyy" Variant="Variant.Text">
                                                <PickerActions Context="dateContext">
                                                    <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="@(async () => await this.InvokeAsync(() => employee.EmpIdentityProof.NatIDDateOfIssue = DateTime.Today))">Today</MudButton>
                                                    <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="@(async () => await this.InvokeAsync(() => employee.EmpIdentityProof.NatIDDateOfIssue = null))">Clear</MudButton>
                                                </PickerActions>
                                            </MudDatePicker>
                                        </MudPaper>
                                    </MudItem>
                                    <MudItem xs="2">
                                        <MudPaper Elevation="0" Class="p-0 w-100">
                                            <MudDatePicker Label="Date of Expiry" Editable="true" @bind-Date="employee.EmpIdentityProof.NatIDDateOfExpiry" Margin="Margin.Dense" AutoClose="true" 
                                                HelperText="Enter date in dd/MM/yyyy format" HelperTextOnFocus="true" Clearable="@_isCboClearable" Disabled="@_isDisabled" 
                                                Mask="@(new DateMask("dd/MM/yyyy"))" DateFormat="dd/MM/yyyy" Placeholder="dd/MM/yyyy" Variant="Variant.Text">
                                                <PickerActions Context="dateContext">
                                                    <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="@(async () => await this.InvokeAsync(() => employee.EmpIdentityProof.NatIDDateOfExpiry = DateTime.Today))">Today</MudButton>
                                                    <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="@(async () => await this.InvokeAsync(() => employee.EmpIdentityProof.NatIDDateOfExpiry = null))">Clear</MudButton>
                                                </PickerActions>
                                            </MudDatePicker>
                                        </MudPaper>
                                    </MudItem>
                                </MudGrid>
                            </ChildContent>
                        </MudExpansionPanel>
                        <MudExpansionPanel Class="p-0 m-0" Dense Gutters>
                            <TitleContent>
                                <div class="d-flex">
                                    <MudIcon Icon="fas fa-id-badge" class="mr-3 pt-1" Style="font-size: 20px; color: #004165"></MudIcon>
                                    <MudText Typo="Typo.subtitle1" Style="text-decoration: underline; color: #004165;"><strong>Others</strong></MudText>
                                </div>
                            </TitleContent>
                            <ChildContent>
                                <MudGrid Spacing="5">
                                    <MudItem xs="3">
                                        <MudPaper Elevation="0" Class="p-0 w-100">
                                            <MudTextField @bind-Value="employee.EmpIdentityProof.TypeOfDocument" Label="Type of Document" HelperText="Max. text input is 50 chars."
                                                Variant="Variant.Text" HelperTextOnFocus="true" Counter="50" MaxLength="50" 
                                                Clearable="@_isClearable" Disabled="@_isDisabled" Immediate="true" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                        </MudPaper>
                                    </MudItem>
                                     <MudItem xs="4">
                                        <MudPaper Elevation="0" Class="p-0 w-100">
                                            <MudTextField @bind-Value="employee.EmpIdentityProof.OtherDocNumber" Label="Document Number" HelperText="Max. text input is 30 chars."
                                                Variant="Variant.Text" HelperTextOnFocus="true"Counter="30" MaxLength="30" 
                                                Clearable="@_isClearable" Disabled="@_isDisabled" Immediate="true" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                        </MudPaper>
                                    </MudItem>
                                    <MudItem xs="2">
                                        <MudPaper Elevation="0" Class="p-0 w-100">
                                            <MudDatePicker Label="Date of Issue" Editable="true" @bind-Date="employee.EmpIdentityProof.OtherDocDateOfIssue" Margin="Margin.Dense" AutoClose="true" 
                                                HelperText="Enter date in dd/MM/yyyy format" HelperTextOnFocus="true" Clearable="@_isCboClearable" Disabled="@_isDisabled" 
                                                Mask="@(new DateMask("dd/MM/yyyy"))" DateFormat="dd/MM/yyyy" Placeholder="dd/MM/yyyy" Variant="Variant.Text">
                                                <PickerActions Context="dateContext">
                                                    <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="@(async () => await this.InvokeAsync(() => employee.EmpIdentityProof.OtherDocDateOfIssue = DateTime.Today))">Today</MudButton>
                                                    <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="@(async () => await this.InvokeAsync(() => employee.EmpIdentityProof.OtherDocDateOfIssue = null))">Clear</MudButton>
                                                </PickerActions>
                                            </MudDatePicker>
                                        </MudPaper>
                                    </MudItem>
                                    <MudItem xs="2">
                                        <MudPaper Elevation="0" Class="p-0 w-100">
                                            <MudDatePicker Label="Date of Expiry" Editable="true" @bind-Date="employee.EmpIdentityProof.OtherDocDateOfExpiry" Margin="Margin.Dense" AutoClose="true" 
                                                HelperText="Enter date in dd/MM/yyyy format" HelperTextOnFocus="true" Clearable="@_isCboClearable" Disabled="@_isDisabled" 
                                                Mask="@(new DateMask("dd/MM/yyyy"))" DateFormat="dd/MM/yyyy" Placeholder="dd/MM/yyyy" Variant="Variant.Text">
                                                <PickerActions Context="dateContext">
                                                    <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="@(async () => await this.InvokeAsync(() => employee.EmpIdentityProof.OtherDocDateOfExpiry = DateTime.Today))">Today</MudButton>
                                                    <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="@(async () => await this.InvokeAsync(() => employee.EmpIdentityProof.OtherDocDateOfExpiry = null))">Clear</MudButton>
                                                </PickerActions>
                                            </MudDatePicker>
                                        </MudPaper>
                                    </MudItem>
                                </MudGrid>
                            </ChildContent>
                        </MudExpansionPanel>
                        <MudExpansionPanel Class="p-0 m-0" Dense Gutters>
                            <TitleContent>
                                <div class="d-flex">
                                    <MudIcon Icon="fas fa-file-signature" class="mr-3 pt-1" Style="font-size: 20px; color: #004165"></MudIcon>
                                    <MudText Typo="Typo.subtitle1" Style="text-decoration: underline; color: #004165;"><strong>Contract Details</strong></MudText>
                                </div>
                            </TitleContent>
                            <ChildContent>
                                <MudGrid Spacing="5">
                                    <MudItem xs="3">
                                        <MudPaper Elevation="0" Class="p-0 w-100">
                                            <MudTextField @bind-Value="employee.EmpIdentityProof.ContractNumber" Label="Contract Number" HelperText="Max. text input is 30 chars."
                                                Variant="Variant.Text" HelperTextOnFocus="true" Counter="30" MaxLength="30" 
                                                Clearable="@_isClearable" Disabled="@_isDisabled" Immediate="true" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                        </MudPaper>
                                    </MudItem>
                                     <MudItem xs="4">
                                        <MudPaper Elevation="0" Class="p-0 w-100">
                                            <MudTextField @bind-Value="employee.EmpIdentityProof.ContractPlaceOfIssue" Label="Place of Issue" HelperText="Max. text input is 100 chars."
                                                Variant="Variant.Text" HelperTextOnFocus="true"Counter="100" MaxLength="100" 
                                                Clearable="@_isClearable" Disabled="@_isDisabled" Immediate="true" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                        </MudPaper>
                                    </MudItem>
                                    <MudItem xs="2">
                                        <MudPaper Elevation="0" Class="p-0 w-100">
                                            <MudDatePicker Label="Date of Issue" Editable="true" @bind-Date="employee.EmpIdentityProof.ContractDateOfIssue" Margin="Margin.Dense" AutoClose="true" 
                                                HelperText="Enter date in dd/MM/yyyy format" HelperTextOnFocus="true" Clearable="@_isCboClearable" Disabled="@_isDisabled" 
                                                Mask="@(new DateMask("dd/MM/yyyy"))" DateFormat="dd/MM/yyyy" Placeholder="dd/MM/yyyy" Variant="Variant.Text">
                                                <PickerActions Context="dateContext">
                                                    <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="@(async () => await this.InvokeAsync(() => employee.EmpIdentityProof.ContractDateOfIssue = DateTime.Today))">Today</MudButton>
                                                    <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="@(async () => await this.InvokeAsync(() => employee.EmpIdentityProof.ContractDateOfIssue = null))">Clear</MudButton>
                                                </PickerActions>
                                            </MudDatePicker>
                                        </MudPaper>
                                    </MudItem>
                                    <MudItem xs="2">
                                        <MudPaper Elevation="0" Class="p-0 w-100">
                                            <MudDatePicker Label="Date of Expiry" Editable="true" @bind-Date="employee.EmpIdentityProof.ContractDateOfExpiry" Margin="Margin.Dense" AutoClose="true" 
                                                HelperText="Enter date in dd/MM/yyyy format" HelperTextOnFocus="true" Clearable="@_isCboClearable" Disabled="@_isDisabled" 
                                                Mask="@(new DateMask("dd/MM/yyyy"))" DateFormat="dd/MM/yyyy" Placeholder="dd/MM/yyyy" Variant="Variant.Text">
                                                <PickerActions Context="dateContext">
                                                    <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="@(async () => await this.InvokeAsync(() => employee.EmpIdentityProof.ContractDateOfExpiry = DateTime.Today))">Today</MudButton>
                                                    <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="@(async () => await this.InvokeAsync(() => employee.EmpIdentityProof.ContractDateOfExpiry = null))">Clear</MudButton>
                                                </PickerActions>
                                            </MudDatePicker>
                                        </MudPaper>
                                    </MudItem>
                                </MudGrid>
                            </ChildContent>
                        </MudExpansionPanel>
                        <MudExpansionPanel Class="p-0 m-0" Dense Gutters>
                            <TitleContent>
                                <div class="d-flex">
                                    <MudIcon Icon="fas fa-passport" class="mr-3 pt-1" Style="font-size: 20px; color: #004165;"></MudIcon>
                                    <MudText Typo="Typo.subtitle1" Style="text-decoration: underline; color: #004165;"><strong>Visa Details</strong></MudText>
                                </div>
                            </TitleContent>
                            <ChildContent>
                                <MudGrid Spacing="5">
                                    <MudItem xs="3">
                                        <MudPaper Elevation="0" Class="p-0 w-100">
                                            <MudAutocomplete @bind-Value="employee.EmpIdentityProof.VisaCountryDesc"
                                                             Class="employee-autocomplete"
                                                             SearchFunc="SearchCountry!"
                                                             Variant="Variant.Text"
                                                             Label="Country"
                                                             Margin="Margin.Dense"
                                                             Dense="true"
                                                             Placeholder="Please Select"
                                                             HelperText="Type a key to search for value"
                                                             HelperTextOnFocus="true"
                                                             Clearable="@_isCboClearable"
                                                             Typo="Typo.subtitle2"
                                                             MaxItems="@(_countryList != null ? _countryList.Count : 10)"
                                                             Disabled="@_isDisabled"
                                                             Modal="true" />
                                        </MudPaper>
                                    </MudItem>
                                    <MudItem xs="3">
                                        <MudPaper Elevation="0" Class="p-0 w-100">
                                            <MudAutocomplete @bind-Value="employee.EmpIdentityProof.VisaTypeDesc"
                                                             Class="employee-autocomplete"
                                                             SearchFunc="SearchVisaType!"
                                                             Variant="Variant.Text"
                                                             Label="Visa Type"
                                                             Margin="Margin.Dense"
                                                             Dense="true"
                                                             Placeholder="Please Select"
                                                             HelperText="Type a key to search for value"
                                                             HelperTextOnFocus="true"
                                                             Clearable="@_isCboClearable" 
                                                             Typo="Typo.subtitle2"
                                                             MaxItems="@(_visaTypeList != null ? _visaTypeList.Count : 10)"
                                                             Disabled="@_isDisabled"
                                                             Modal="true" />
                                        </MudPaper>
                                    </MudItem>
                                    <MudItem xs="3">
                                        <MudPaper Elevation="0" Class="p-0 w-100">
                                            <MudTextField @bind-Value="employee.EmpIdentityProof.VisaNumber" Label="Visa Number" HelperText="Max. text input is 30 chars."
                                                          Variant="Variant.Text" HelperTextOnFocus="true" Counter="30" MaxLength="30"
                                                          Clearable="@_isClearable" Disabled="@_isDisabled" Immediate="true" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                        </MudPaper>
                                    </MudItem>  
                                    <MudItem xs="3">
                                        <MudPaper Elevation="0" Class="p-0 w-100">
                                            <MudTextField @bind-Value="employee.EmpIdentityProof.Profession" Label="Profession" HelperText="Max. text input is 100 chars."
                                                          Variant="Variant.Text" HelperTextOnFocus="true" Counter="100" MaxLength="100"
                                                          Clearable="@_isClearable" Disabled="@_isDisabled" Immediate="true" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                        </MudPaper>
                                    </MudItem>
                                </MudGrid>
                                <MudGrid Spacing="5">
                                    <MudItem xs="3">
                                        <MudPaper Elevation="0" Class="p-0 w-100">
                                            <MudTextField @bind-Value="employee.EmpIdentityProof.Sponsor" Label="Sponsor" HelperText="Max. text input is 100 chars."
                                                          Variant="Variant.Text" HelperTextOnFocus="true" Counter="100" MaxLength="100"
                                                          Clearable="@_isClearable" Disabled="@_isDisabled" Immediate="true" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                                        </MudPaper>
                                    </MudItem>
                                    <MudItem xs="3">
                                        <MudPaper Elevation="0" Class="p-0 w-100">
                                            <MudDatePicker Label="Date of Issue" Editable="true" @bind-Date="employee.EmpIdentityProof.VisaDateOfIssue" Margin="Margin.Dense" AutoClose="true" 
                                                HelperText="Enter date in dd/MM/yyyy format" HelperTextOnFocus="true" Clearable="@_isCboClearable" Disabled="@_isDisabled" 
                                                Mask="@(new DateMask("dd/MM/yyyy"))" DateFormat="dd/MM/yyyy" Placeholder="dd/MM/yyyy" Variant="Variant.Text">
                                                <PickerActions Context="dateContext">
                                                    <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="@(async () => await this.InvokeAsync(() => employee.EmpIdentityProof.VisaDateOfIssue = DateTime.Today))">Today</MudButton>
                                                    <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="@(async () => await this.InvokeAsync(() => employee.EmpIdentityProof.VisaDateOfIssue = null))">Clear</MudButton>
                                                </PickerActions>
                                            </MudDatePicker>
                                        </MudPaper>
                                    </MudItem>
                                    <MudItem xs="3">
                                        <MudPaper Elevation="0" Class="p-0 w-100">
                                            <MudDatePicker Label="Date of Expiry" Editable="true" @bind-Date="employee.EmpIdentityProof.VisaDateOfExpiry" Margin="Margin.Dense" AutoClose="true" 
                                                HelperText="Enter date in dd/MM/yyyy format" HelperTextOnFocus="true" Clearable="@_isCboClearable" Disabled="@_isDisabled"
                                                Mask="@(new DateMask("dd/MM/yyyy"))" DateFormat="dd/MM/yyyy" Placeholder="dd/MM/yyyy" Variant="Variant.Text">
                                                <PickerActions Context="dateContext">
                                                    <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="@(async () => await this.InvokeAsync(() => employee.EmpIdentityProof.VisaDateOfExpiry = DateTime.Today))">Today</MudButton>
                                                    <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="@(async () => await this.InvokeAsync(() => employee.EmpIdentityProof.VisaDateOfExpiry = null))">Clear</MudButton>
                                                </PickerActions>
                                            </MudDatePicker>
                                        </MudPaper>
                                    </MudItem>
                                </MudGrid>
                            </ChildContent>
                        </MudExpansionPanel>
                        <MudScrollToTop TopOffset="100"
                                        Selector="#identityPanel"
                                         VisibleCssClass="visible absolute"
                                         HiddenCssClass="hidden absolute">
                            <MudButton Variant="Variant.Filled" StartIcon="@Icons.Material.Filled.ArrowUpward" Color="Color.Error">Go to top</MudButton>
                         </MudScrollToTop>
                    </MudExpansionPanels>
                </div>
            </MudTabPanel>
            <MudTabPanel Text="Skill & Qualifications" ToolTip="Manage employee skill sets" Icon="@Icons.Material.Rounded.Equalizer">
                <div id="qualificationPanel" class="ma-0 full-height" style="overflow-y: scroll; scrollbar-width: none;">
                    <MudExpansionPanels Elevation="0" MultiExpansion="true">
                        <MudExpansionPanel Class="pt-0 mt-0" Dense Gutters Expanded>
                            <TitleContent>
                                <div class="d-flex">
                                    <MudIcon Icon="fas fa-graduation-cap" Size=Size.Small Style="color: #004165;" class="mr-3"></MudIcon>
                                    <MudText Typo="Typo.subtitle1" Style="text-decoration: underline; color: #004165;"><strong>Qualifications</strong></MudText>
                                    <MudSpacer />  
                                    <MudFab Style="background-color: #004165; color: white;" StartIcon="@Icons.Material.Filled.Add" Size=Size.Small Class="mr-3" />
                                </div>
                            </TitleContent>
                            <ChildContent>
                                <MudPaper Elevation="4" Square="true" Class="w-100">
                                    <MudDataGrid T="QualificationDTO" Items="@employee.QualificationList" Hover="true" Striped="true" Class="skill-qualification-grid"
                                                 TableClass="fixed-table" Dense="false" ColumnResizeMode="ResizeMode.Column" HorizontalScrollbar="true" EditMode="DataGridEditMode.Form">
                                        <Columns>
                                            <PropertyColumn Property="x => x.QualificationDesc" Title="Qualification" Class="col-qualification" />
                                            <PropertyColumn Property="x => x.StreamDesc" Title="Stream" Width="150px" Class="col-stream" />
                                            <PropertyColumn Property="x => x.SpecializationDesc" Title="Specialization" Class="col-specialization" />
                                            <PropertyColumn Property="x => x.UniversityName" Title="University" Class="col-university" />
                                            <PropertyColumn Property="x => x.Institute" Width="100px" Class="col-institute" />
                                            <PropertyColumn Property="x => x.QualificationModeDesc" Title="Qualification Mode" Class="col-qualification-mode" />
                                            <PropertyColumn Property="x => x.CountryDesc" Title="Country" Width="120px" />
                                            <PropertyColumn Property="x => x.StateDesc" Title="State" Width="120px" />
                                            <PropertyColumn Property="x => x.CityTownName" Title="City" Width="120px" />
                                            <PropertyColumn Property="x => x.FromMonthDesc" Title="From Month" Width="130px" />
                                            <PropertyColumn Property="x => x.FromYear" Title="From Year" Width="130px" />
                                            <PropertyColumn Property="x => x.ToMonthDesc" Title="To Month" Width="130px" />
                                            <PropertyColumn Property="x => x.ToYear" Title="To Year" Width="130px" />
                                            <PropertyColumn Property="x => x.PassMonthDesc" Title="Pass Month" Width="130px" />
                                            <PropertyColumn Property="x => x.PassYear" Title="Pass Year" Width="130px" />
                                            <TemplateColumn Hidden="false" CellClass="d-flex justify-end">
                                                <CellTemplate Context="row">
                                                    <MudIconButton Color="Color.Info" title="Edit record" Class="show-btn fa-icon-btn" OnClick="@row.Actions.StartEditingItemAsync">
                                                        <ChildContent>
                                                            ,<i class="fas fa-edit fa-1x"></i>
                                                        </ChildContent>
                                                    </MudIconButton>
                                                    <MudIconButton Color="Color.Success" title="Save changes" Class="hide-btn fa-icon-btn" OnClick="@row.Actions.StartEditingItemAsync">
                                                        <ChildContent>
                                                            <i class="fas fa-save fa-1x"></i>
                                                        </ChildContent>
                                                    </MudIconButton>
                                                    <MudIconButton Color="Color.Error" title="Delete record" Class="show-btn fa-icon-btn" OnClick="@row.Actions.StartEditingItemAsync">
                                                        <ChildContent>
                                                            <i class="fas fa-trash-alt fa-1x"></i>
                                                        </ChildContent>
                                                    </MudIconButton>
                                                </CellTemplate>
                                            </TemplateColumn>
                                        </Columns>
                                        <NoRecordsContent>
                                         <div class="no-data-box">
                                             <MudIcon Icon="@Icons.Material.Filled.Info" Class="no-data-icon" />
                                             <span>No data found</span>
                                         </div>
                                    </NoRecordsContent>
                                    </MudDataGrid>
                                </MudPaper>
                            </ChildContent>
                        </MudExpansionPanel>
                        <MudExpansionPanel Class="pt-0 mt-0" Dense Gutters Expanded>
                            <TitleContent>
                                <div class="d-flex">
                                    <MudIcon Icon="fas fa-user-tag" Style="color: #004165;" Size=Size.Small class="mr-3"></MudIcon>
                                    <MudText Typo="Typo.subtitle1" Style="text-decoration: underline; color: #004165;"><strong>Skills</strong></MudText>
                                    <MudSpacer />
                                    <MudFab Style="background-color: #004165; color: white;" StartIcon="@Icons.Material.Filled.Add" Size="Size.Small" Class="mr-3" />
                                </div>
                            </TitleContent>
                            <ChildContent>
                                <MudPaper Elevation="4" Square="true" Class="w-100">
                                    <MudDataGrid T="EmployeeSkillDTO" Items="@employee.EmployeeSkillList" Hover="true" Striped="true" Class="skill-grid"
                                        TableClass="fixed-table" Dense="false" ColumnResizeMode="ResizeMode.Column" HorizontalScrollbar="true"
                                        EditMode="DataGridEditMode.Form">
                                        <Columns>
                                            <PropertyColumn Property="x => x.SkillName" Title="Skill Name" Class="col-skillname" />
                                            <PropertyColumn Property="x => x.LevelDesc" Width="150px" Class="col-level" />
                                            <PropertyColumn Property="x => x.LastUsedMonthDesc" Title="Last Used Month" Class="col-LastUsedMonth" />
                                            <PropertyColumn Property="x => x.LastUsedYear" Title="Last Used Year" />
                                            <PropertyColumn Property="x => x.FromMonthDesc" Title="From Month" Class="col-FromMonth" />
                                            <PropertyColumn Property="x => x.FromYear" Title="From Year" />
                                            <PropertyColumn Property="x => x.ToMonthDesc" Title="To Month" />
                                            <PropertyColumn Property="x => x.ToYear" Title="To Year" />
                                            <TemplateColumn Hidden="false" CellClass="d-flex justify-end">
                                                <CellTemplate Context="row">
                                                    <MudIconButton Color="Color.Info" title="Edit record" Class="show-btn fa-icon-btn" OnClick="@row.Actions.StartEditingItemAsync">
                                                        <ChildContent>
                                                            ,<i class="fas fa-edit fa-1x"></i>
                                                        </ChildContent>
                                                    </MudIconButton>
                                                    <MudIconButton Color="Color.Success" title="Save changes" Class="hide-btn fa-icon-btn" OnClick="@row.Actions.StartEditingItemAsync">
                                                        <ChildContent>
                                                            <i class="fas fa-save fa-1x"></i>
                                                        </ChildContent>
                                                    </MudIconButton>
                                                    <MudIconButton Color="Color.Error" title="Delete record" Class="show-btn fa-icon-btn" OnClick="@row.Actions.StartEditingItemAsync">
                                                        <ChildContent>
                                                            <i class="fas fa-trash-alt fa-1x"></i>
                                                        </ChildContent>
                                                    </MudIconButton>
                                                </CellTemplate>
                                            </TemplateColumn>
                                        </Columns>
                                        <NoRecordsContent>
			                                 <div class="no-data-box">
				                                 <MudIcon Icon="@Icons.Material.Filled.Info" Class="no-data-icon" />
				                                 <span>No data found</span>
			                                 </div>
		                                </NoRecordsContent>
                                    </MudDataGrid>
                                </MudPaper>
                            </ChildContent>
                        </MudExpansionPanel>
                        <MudExpansionPanel Class="pt-0 mt-0" Dense Gutters Expanded>
                            <TitleContent>
                                <div class="d-flex">
                                    <MudIcon Icon="fas fa-certificate" Style="color: #004165;" Size=Size.Small class="mr-3"></MudIcon>
                                    <MudText Typo="Typo.subtitle1" Style="text-decoration: underline; color: #004165;"><strong>Certifications & Training</strong></MudText>
                                    <MudSpacer />
                                    <MudFab Style="background-color: #004165; color: white;" StartIcon="@Icons.Material.Filled.Add" Size="Size.Small" Class="mr-3" />
                                </div>
                            </TitleContent>
                            <ChildContent>
                                <MudPaper Elevation="4" Square="true" Class="w-100">
                                    <MudDataGrid T="EmployeeCertificationDTO" Items="@employee.EmployeeCertificationList" Hover="true" Striped="true"
                                        TableClass="fixed-table" TableStyle="table-layout: fixed; width: 100%;" Class="certification-grid" 
                                        Dense="false" ColumnResizeMode="ResizeMode.Column" HorizontalScrollbar="true" EditMode="DataGridEditMode.Form">
                                        <Columns>
                                            <PropertyColumn Property="x => x.AutoId" Hidden />
                                            <PropertyColumn Property="x => x.QualificationDesc" Class="col-Qualification" />
                                            <PropertyColumn Property="x => x.QualificationCode" Hidden />
                                            <PropertyColumn Property="x => x.StreamDesc" title="Stream" Class="col-Stream" />
                                            <PropertyColumn Property="x => x.StreamCode" Hidden />
                                            <PropertyColumn Property="x => x.Specialization" Class="col-Specialization" />
                                            <PropertyColumn Property="x => x.University" Class="col-University" />
                                            <PropertyColumn Property="x => x.Institute" Class="col-Institute" />
                                            <PropertyColumn Property="x => x.Country" Class="col-Country" />
                                            <PropertyColumn Property="x => x.CountryCode" Hidden />
                                            <PropertyColumn Property="x => x.State" Class="col-State" />                                        
                                            <PropertyColumn Property="x => x.CityTownName" Title="City" Class="col-City" />                                        
                                            <PropertyColumn Property="x => x.FromMonth" Title="From Month" />
                                            <PropertyColumn Property="x => x.FromMonthCode" Hidden />
                                            <PropertyColumn Property="x => x.FromYear" Title="From Year" />
                                            <PropertyColumn Property="x => x.ToMonth" Title="To Month" />
                                            <PropertyColumn Property="x => x.FromMonthCode" Hidden />
                                            <PropertyColumn Property="x => x.ToYear" Title="To Year" />
                                            <PropertyColumn Property="x => x.PassMonth" Title="Pass Month" />
                                            <PropertyColumn Property="x => x.PassMonthCode" Hidden />
                                            <PropertyColumn Property="x => x.PassYear" Title="Pass Year" />
                                            <TemplateColumn Hidden="false" CellClass="d-flex justify-end">
                                                <CellTemplate Context="row">
                                                     <MudIconButton Color="Color.Info" title="Edit record" Class="show-btn fa-icon-btn" OnClick="@row.Actions.StartEditingItemAsync">
                                                        <ChildContent>
                                                            ,<i class="fas fa-edit fa-1x"></i>
                                                        </ChildContent>
                                                    </MudIconButton>
                                                    <MudIconButton Color="Color.Success" title="Save changes" Class="hide-btn fa-icon-btn" OnClick="@row.Actions.StartEditingItemAsync">
                                                        <ChildContent>
                                                            <i class="fas fa-save fa-1x"></i>
                                                        </ChildContent>
                                                    </MudIconButton>
                                                    <MudIconButton Color="Color.Error" title="Delete record" Class="show-btn fa-icon-btn" OnClick="@row.Actions.StartEditingItemAsync">
                                                        <ChildContent>
                                                            <i class="fas fa-trash-alt fa-1x"></i>
                                                        </ChildContent>
                                                    </MudIconButton>
                                                </CellTemplate>
                                            </TemplateColumn>
                                        </Columns>
                                        <NoRecordsContent>
			                                 <div class="no-data-box">
				                                 <MudIcon Icon="@Icons.Material.Filled.Info" Class="no-data-icon" />
				                                 <span>No data found</span>
			                                 </div>
		                                </NoRecordsContent>
                                    </MudDataGrid>
                                 </MudPaper>
                            </ChildContent>
                        </MudExpansionPanel>
                         <MudExpansionPanel Class="pt-0 mt-0" Dense Gutters>
                            <TitleContent>
                                <div class="d-flex">
                                    <MudIcon Icon="fas fa-globe" Style="color: #004165;" Size=Size.Small class="mr-3"></MudIcon>
                                    <MudText Typo="Typo.subtitle1" Style="text-decoration: underline; color: #004165;"><strong>Languages</strong></MudText>
                                    <MudSpacer />
                                    <MudFab Style="background-color: #004165; color: white;" StartIcon="@Icons.Material.Filled.Add" Size="Size.Small" Class="mr-3" />
                                </div>
                            </TitleContent>
                            <ChildContent>
                                <MudPaper Elevation="4" Square="true" Class="w-100">
                                    <MudDataGrid T="LanguageSkillDTO" Items="@employee.LanguageSkillList" Hover="true" Striped="true" Class="language-grid"
                                        TableClass="fixed-table" Dense="false" ColumnResizeMode="ResizeMode.Column" HorizontalScrollbar="true" EditMode="DataGridEditMode.Form">
                                        <Columns>
                                            <PropertyColumn Property="x => x.AutoId" Hidden />
                                            <PropertyColumn Property="x => x.LanguageDesc" title="Language" Class="col-language-desc" />
                                            <PropertyColumn Property="x => x.LanguageCode" Hidden />
                                            <PropertyColumn Property="x => x.CanReadDescription" Title="Can Read?" />
                                            <PropertyColumn Property="x => x.CanSpeakDescription" Title="Can Speak?" />
                                            <PropertyColumn Property="x => x.CanWriteDescription" Title="Can Write?" />
                                            <PropertyColumn Property="x => x.MotherTongueDescription" Title="Mother Tongue?" />
                                            <TemplateColumn Hidden="false" CellClass="d-flex justify-end">
                                                <CellTemplate Context="row">
                                                     <MudIconButton Color="Color.Info" title="Edit record" Class="show-btn fa-icon-btn" OnClick="@row.Actions.StartEditingItemAsync">
                                                        <ChildContent>
                                                            ,<i class="fas fa-edit fa-1x"></i>
                                                        </ChildContent>
                                                    </MudIconButton>
                                                    <MudIconButton Color="Color.Success" title="Save changes" Class="hide-btn fa-icon-btn" OnClick="@row.Actions.StartEditingItemAsync">
                                                        <ChildContent>
                                                            <i class="fas fa-save fa-1x"></i>
                                                        </ChildContent>
                                                    </MudIconButton>
                                                    <MudIconButton Color="Color.Error" title="Delete record" Class="show-btn fa-icon-btn" OnClick="@row.Actions.StartEditingItemAsync">
                                                        <ChildContent>
                                                            <i class="fas fa-trash-alt fa-1x"></i>
                                                        </ChildContent>
                                                    </MudIconButton>
                                                </CellTemplate>
                                            </TemplateColumn>
                                         </Columns>
                                        <NoRecordsContent>
			                                 <div class="no-data-box">
				                                 <MudIcon Icon="@Icons.Material.Filled.Info" Class="no-data-icon" />
				                                 <span>No data found</span>
			                                 </div>
		                                </NoRecordsContent>
                                     </MudDataGrid>
                                 </MudPaper>
                             </ChildContent>
                         </MudExpansionPanel>
                        <MudScrollToTop TopOffset="100"
                                        Selector="#qualificationPanel"
                                         VisibleCssClass="visible absolute"
                                         HiddenCssClass="hidden absolute">
                            <MudButton Variant="Variant.Filled" StartIcon="@Icons.Material.Filled.ArrowUpward" Color="Color.Error">Go to top</MudButton>
                         </MudScrollToTop>
                    </MudExpansionPanels>
                </div>
            </MudTabPanel>
            <MudTabPanel Text="Family" ToolTip="Manage employee dependents" Icon="@Icons.Material.Rounded.FamilyRestroom">
                <div id="familyPanel" class="ma-0 full-height" style="overflow-y: scroll; scrollbar-width: none;">
                    <MudExpansionPanels Elevation="0" MultiExpansion="true">
                        <MudExpansionPanel Class="pt-0 mt-0" Dense Gutters Expanded>
                            <TitleContent>
                                <div class="d-flex">
                                    <MudIcon Icon="fas fa-users" Size=Size.Small Style="color: #004165;" class="mr-3"></MudIcon>
                                    <MudText Typo="Typo.subtitle1" Style="text-decoration: underline; color: #004165;"><strong>Family Members</strong></MudText>
                                    <MudSpacer />  
                                    <MudFab Style="background-color: #004165; color: white;" StartIcon="@Icons.Material.Filled.Add" Size=Size.Small Class="mr-3" />
                                </div>
                            </TitleContent>
                            <ChildContent>
                                <MudPaper Elevation="4" Square="true" Class="w-100">
                                    <MudDataGrid T="FamilyMemberDTO" Items="@employee.FamilyMemberList" Hover="true" Striped="true" Class="family-member-grid"
                                        TableClass="fixed-table" Dense="false"ColumnResizeMode="ResizeMode.Column" HorizontalScrollbar="true"
                                        EditMode="DataGridEditMode.Form">
                                        <Columns>
                                            <PropertyColumn Property="x => x.AutoId" Hidden />
                                            <PropertyColumn Property="x => x.FirstName" Title="First Name" Class="col-familyname" />
                                            <PropertyColumn Property="x => x.MiddleName" Title="Middle Name" Class="col-familyname" />
                                            <PropertyColumn Property="x => x.LastName" Title="Last Name" Class="col-familyname" />
                                            <PropertyColumn Property="x => x.RelationCode" Hidden />
                                            <PropertyColumn Property="x => x.Relation" Class="col-relation" />
                                            <PropertyColumn Property="x => x.DOB" Title="Date of Birth" Class="col-dob" />
                                            <PropertyColumn Property="x => x.QualificationCode" Hidden />
                                            <PropertyColumn Property="x => x.Qualification" Class="col-qualification" />
                                            <PropertyColumn Property="x => x.StreamCode" Hidden />
                                            <PropertyColumn Property="x => x.StreamDesc" Class="col-stream" />
                                            <PropertyColumn Property="x => x.SpecializationCode" Hidden />
                                            <PropertyColumn Property="x => x.Specialization" Class="col-specialization" />
                                            <PropertyColumn Property="x => x.Occupation" Class="col-occupation" />
                                            <PropertyColumn Property="x => x.ContactNo" Class="col-contact" />
                                            <PropertyColumn Property="x => x.CountryCode" Hidden />
                                            <PropertyColumn Property="x => x.Country" Class="col-country" />
                                            <PropertyColumn Property="x => x.StateCode" Hidden />
                                            <PropertyColumn Property="x => x.State" Class="col-state" />
                                            <PropertyColumn Property="x => x.CityTownName" Class="col-city" />
                                            <PropertyColumn Property="x => x.District" Class="col-district" />
                                             <PropertyColumn Property="x => x.IsDependentDesc" Title="Is Dependent?" Class="flex-column" />
                                            <TemplateColumn Hidden="false" CellClass="d-flex justify-end">
                                                <CellTemplate Context="row">
                                                     <MudIconButton Color="Color.Info" title="Edit record" Class="show-btn fa-icon-btn" OnClick="@row.Actions.StartEditingItemAsync">
                                                        <ChildContent>
                                                            ,<i class="fas fa-edit fa-1x"></i>
                                                        </ChildContent>
                                                    </MudIconButton>
                                                    <MudIconButton Color="Color.Success" title="Save changes" Class="hide-btn fa-icon-btn" OnClick="@row.Actions.StartEditingItemAsync">
                                                        <ChildContent>
                                                            <i class="fas fa-save fa-1x"></i>
                                                        </ChildContent>
                                                    </MudIconButton>
                                                    <MudIconButton Color="Color.Error" title="Delete record" Class="show-btn fa-icon-btn" OnClick="@row.Actions.StartEditingItemAsync">
                                                        <ChildContent>
                                                            <i class="fas fa-trash-alt fa-1x"></i>
                                                        </ChildContent>
                                                    </MudIconButton>
                                                </CellTemplate>
                                            </TemplateColumn>
                                        </Columns>
                                        <NoRecordsContent>
                                              <div class="no-data-box">
                                                  <MudIcon Icon="@Icons.Material.Filled.Info" Class="no-data-icon" />
                                                  <span>No data found</span>
                                              </div>
                                         </NoRecordsContent>
                                    </MudDataGrid>
                                </MudPaper>
                            </ChildContent>
                        </MudExpansionPanel>
                         <MudExpansionPanel Class="pt-0 mt-0" Dense Gutters Expanded>
                            <TitleContent>
                                <div class="d-flex">
                                    <MudIcon Icon="fas fa-file-alt" Size=Size.Small Style="color: #004165;" class="mr-3"></MudIcon>
                                    <MudText Typo="Typo.subtitle1" Style="text-decoration: underline; color: #004165;"><strong>Family Visa Details</strong></MudText>
                                    <MudSpacer />
                                    <MudFab Style="background-color: #004165; color: white;" StartIcon="@Icons.Material.Filled.Add" Size=Size.Small Class="mr-3" />
                                </div>
                            </TitleContent>
                            <ChildContent>
                                <MudPaper Elevation="4" Square="true" Class="w-100">
                                    <MudDataGrid T="FamilyVisaDTO" Items="@employee.FamilyVisaList" Hover="true" Striped="true" Class="family-visa-grid"
                                        TableClass="fixed-table" Dense="false" ColumnResizeMode="ResizeMode.Column" HorizontalScrollbar="true" EditMode="DataGridEditMode.Form">
                                        <Columns>
                                            <PropertyColumn Property="x => x.AutoId" Hidden />
                                            <PropertyColumn Property="x => x.FamilyId" Hidden />
                                            <PropertyColumn Property="x => x.FamilyMemberName" Title="Family Name" Class="col-family-name" />
                                            <PropertyColumn Property="x => x.CountryCode" Hidden />
                                            <PropertyColumn Property="x => x.Country" Class="col-country" />
                                            <PropertyColumn Property="x => x.VisaTypeCode" Hidden />
                                            <PropertyColumn Property="x => x.VisaType" Title="Visa Type" Class="col-visa-type" />
                                            <PropertyColumn Property="x => x.Profession" Class="col-profession" />
                                            <PropertyColumn Property="x => x.IssueDate" Title="Date of Issue" Class="col-issue-date">
                                                <CellTemplate Context="row">
                                                    @row.Item.IssueDate?.ToString("dd-MMM-yyyy")
                                                </CellTemplate>
                                            </PropertyColumn>
                                            <PropertyColumn Property="x => x.ExpiryDate" Title="Date of Expiry">
                                                <CellTemplate Context="row">
                                                    @row.Item.ExpiryDate?.ToString("dd-MMM-yyyy")
                                                </CellTemplate>
                                            </PropertyColumn>
                                             <TemplateColumn Hidden="false" CellClass="d-flex justify-end">
                                                 <CellTemplate Context="row">
                                                    <MudIconButton Color="Color.Info" title="Edit record" Class="show-btn fa-icon-btn" OnClick="@row.Actions.StartEditingItemAsync">
                                                        <ChildContent>
                                                            ,<i class="fas fa-edit fa-1x"></i>
                                                        </ChildContent>
                                                    </MudIconButton>
                                                    <MudIconButton Color="Color.Success" title="Save changes" Class="hide-btn fa-icon-btn" OnClick="@row.Actions.StartEditingItemAsync">
                                                        <ChildContent>
                                                            <i class="fas fa-save fa-1x"></i>
                                                        </ChildContent>
                                                    </MudIconButton>
                                                    <MudIconButton Color="Color.Error" title="Delete record" Class="show-btn fa-icon-btn" OnClick="@row.Actions.StartEditingItemAsync">
                                                        <ChildContent>
                                                            <i class="fas fa-trash-alt fa-1x"></i>
                                                        </ChildContent>
                                                    </MudIconButton>
                                                 </CellTemplate>
                                             </TemplateColumn>
                                         </Columns>
                                        <NoRecordsContent>
			                                 <div class="no-data-box">
				                                 <MudIcon Icon="@Icons.Material.Filled.Info" Class="no-data-icon" />
				                                 <span>No data found</span>
			                                 </div>
		                                </NoRecordsContent>
                                     </MudDataGrid>
                                 </MudPaper>
                             </ChildContent>
                         </MudExpansionPanel>
                        <MudScrollToTop TopOffset="100"
                                        Selector="#familyPanel"
                                        VisibleCssClass="visible absolute"
                                        HiddenCssClass="hidden absolute">
                            <MudButton Variant="Variant.Filled" StartIcon="@Icons.Material.Filled.ArrowUpward" Color="Color.Error">Go to top</MudButton>
                        </MudScrollToTop>
                    </MudExpansionPanels>
                </div>
            </MudTabPanel>
            <MudTabPanel Text="Employment History" ToolTip="Manage employment records" Icon="@Icons.Material.Rounded.WorkHistory">
                <div id="employmentPanel" class="ma-0 full-height" style="overflow-y: scroll; scrollbar-width: none;">
                    <MudExpansionPanels Elevation="0" MultiExpansion="true">
                        <MudExpansionPanel Class="pt-0 mt-0" Dense Gutters Expanded>
                            <TitleContent>
                                <div class="d-flex">
                                    <MudIcon Icon="fas fa-history" Size=Size.Small Style="color: #004165;" class="mr-3"></MudIcon>
                                    <MudText Typo="Typo.subtitle1" Style="text-decoration: underline; color: #004165;"><strong>Past Employment</strong></MudText>
                                    <MudSpacer />
                                    <MudFab Style="background-color: #004165; color: white;" StartIcon="@Icons.Material.Filled.Add" Size=Size.Small Class="mr-3" />
                                </div>
                            </TitleContent>
                            <ChildContent>
                                <MudPaper Elevation="4" Square="true" Class="w-100">
                                    <MudDataGrid T="EmploymentHistoryDTO" Items="@employee.EmploymentHistoryList" Hover="true" Striped="true" Class="employment-history-grid" 
                                        TableClass="fixed-table" Dense="false" ColumnResizeMode="ResizeMode.Column" HorizontalScrollbar="true"
                                        EditMode="DataGridEditMode.Form">
                                        <Columns>
                                            <PropertyColumn Property="x => x.AutoId" Hidden />
                                             <PropertyColumn Property="x => x.CompanyName" Title="Company Name" Class="col-company-name" />
                                             <PropertyColumn Property="x => x.CompanyAddress" Title="Company Address" Class="col-company-address" />
                                            <PropertyColumn Property="x => x.Designation" Class="col-designation" />
                                            <PropertyColumn Property="x => x.Role" Class="col-role" />
                                             <PropertyColumn Property="x => x.FromDate" Title="From Date" Class="col-date">
                                                 <CellTemplate Context="row">
                                                     @row.Item.FromDate?.ToString("dd-MMM-yyyy")
                                                </CellTemplate>
                                            </PropertyColumn>
                                            <PropertyColumn Property="x => x.ToDate" Title="To Date" Class="col-date">
                                                <CellTemplate Context="row">
                                                    @row.Item.ToDate?.ToString("dd-MMM-yyyy")
                                                </CellTemplate>
                                            </PropertyColumn>
                                            <PropertyColumn Property="x => x.LastDrawnSalary" Title="Last Drawn Salary" Class="col-salary">
                                                <CellTemplate Context="row">
                                                    @string.Format("{0:C3}", @row.Item.LastDrawnSalary)
                                                </CellTemplate>
                                            </PropertyColumn>
                                            <PropertyColumn Property="x => x.SalaryTypeCode" Hidden />
                                            <PropertyColumn Property="x => x.SalaryType" Title="Salary Type" Class="col-salary-type" />
                                            <PropertyColumn Property="x => x.SalaryCurrencyCode" Hidden />
                                            <PropertyColumn Property="x => x.SalaryCurrency" Title="Currency" Class="col-currency" />
                                            <PropertyColumn Property="x => x.ReasonOfChange" Title="Reason of Change" Class="col-reason" />
                                            <PropertyColumn Property="x => x.ReportingManager" Title="Reporting Manager" Class="col-manager" />
                                            <PropertyColumn Property="x => x.CompanyWebsite" Title="Company Website" Class="col-website" />
                                            <TemplateColumn Hidden="false" CellClass="d-flex justify-end">
                                                <CellTemplate Context="row">
                                                    <MudIconButton Color="Color.Info" title="Edit record" Class="show-btn fa-icon-btn" OnClick="@row.Actions.StartEditingItemAsync">
                                                        <ChildContent>
                                                            ,<i class="fas fa-edit fa-1x"></i>
                                                        </ChildContent>
                                                    </MudIconButton>
                                                    <MudIconButton Color="Color.Success" title="Save changes" Class="hide-btn fa-icon-btn" OnClick="@row.Actions.StartEditingItemAsync">
                                                        <ChildContent>
                                                            <i class="fas fa-save fa-1x"></i>
                                                        </ChildContent>
                                                    </MudIconButton>
                                                    <MudIconButton Color="Color.Error" title="Delete record" Class="show-btn fa-icon-btn" OnClick="@row.Actions.StartEditingItemAsync">
                                                        <ChildContent>
                                                             <i class="fas fa-trash-alt fa-1x"></i>
                                                        </ChildContent>
                                                    </MudIconButton>
                                                </CellTemplate>
                                            </TemplateColumn>
                                        </Columns>
                                        <NoRecordsContent>
			                                 <div class="no-data-box">
				                                 <MudIcon Icon="@Icons.Material.Filled.Info" Class="no-data-icon" />
				                                 <span>No data found</span>
			                                 </div>
		                                </NoRecordsContent>
                                    </MudDataGrid>
                                </MudPaper>
                            </ChildContent>
                        </MudExpansionPanel>
                        <MudScrollToTop TopOffset="100"
                                        Selector="#employmentPanel"
                                        VisibleCssClass="visible absolute"
                                        HiddenCssClass="hidden absolute">
                            <MudButton Variant="Variant.Filled" StartIcon="@Icons.Material.Filled.ArrowUpward" Color="Color.Error">Go to top</MudButton>
                        </MudScrollToTop>
                    </MudExpansionPanels>
                </div>
            </MudTabPanel>
            <MudTabPanel Text="Undertakings" ToolTip="Manage contract details" Icon="@Icons.Material.Rounded.CleanHands" Visible="false">
                <MudPaper Elevation="4" Class="d-flex align-center justify-center mud-width-full bg-primary">
                </MudPaper>
            </MudTabPanel>
            <MudTabPanel Text="Update History" ToolTip="Manage employee detail changes" Icon="@Icons.Material.Rounded.Update">
                <div id="updateHistoryPanel" class="ma-0 full-height" style="overflow-y: scroll; scrollbar-width: none;">
                    <MudStack Row="false" AlignItems="AlignItems.Stretch" Spacing="5" Wrap="Wrap.NoWrap">
                        <MudPaper Elevation="0" Class="p-0 d-flex">
                             <MudChip T="string" Label="true" Icon="fas fa-check-circle" Size=Size.Medium Color="Color.Info" Style="font-size: 12px;">All</MudChip>
                             <MudChip T="string" Label="true" Icon="fas fa-hourglass-half" Size=Size.Medium Color="Color.Warning">Pending</MudChip>
                             <MudChip T="string" Label="true" Icon="fas fa-thumbs-up" Size=Size.Medium Color="Color.Success">Approved</MudChip>
                             <MudChip T="string" Label="true" Icon="far fa-thumbs-up" Size=Size.Medium Color="Color.Error">Rejected</MudChip>
                            <MudSpacer />
                            <MudPaper Elevation="0" Class="employee-menu">
                                <MudSelect @bind-Value="_selectedMenu" Variant="Variant.Filled" Margin="Margin.Dense" Label="Menu"
                                            Placeholder="Select Transaction Type" AdornmentIcon="@Icons.Material.Filled.MenuOpen" AdornmentColor="Color.Default"
                                            Clearable="@_isClearable" Immediate="true" Typo="Typo.subtitle2">
                                    @foreach (var menu in _employeeMenu)
                                    {
                                        <MudSelectItem Value="menu">@menu</MudSelectItem>
                                    }
                                </MudSelect>
                            </MudPaper>
                        </MudPaper>
                        <MudPaper Elevation="0" Class="p-0">
                            <div class="update-history-grid">
                                <MudDataGrid T="EmployeeTransactionDTO" Items="@employee.EmployeeTransactionList" Hover="true" Striped="true"
                                             TableClass="fixed-table" Dense="false" ColumnResizeMode="ResizeMode.Column" HorizontalScrollbar="true"
                                             EditMode="DataGridEditMode.Form">
                                    <Columns>
                                        <PropertyColumn Property="x => x.AutoId" Hidden />
                                        <PropertyColumn Property="x => x.StatusCode" Hidden />
                                        <PropertyColumn Property="x => x.SectionCode" Hidden />
                                        <PropertyColumn Property="x => x.EmployeeNo" Hidden />
                                        <PropertyColumn Property="x => x.TransactionNo" Hidden />
                                        <PropertyColumn Property="x => x.ActionDesc" Title="Action Taken" Class="col-action-taken" />
                                        <PropertyColumn Property="x => x.Section" Class="col-section" />
                                        <PropertyColumn Property="x => x.Status" Class="col-status">
                                             <CellTemplate Context="row">
                                                 <MudChip T="string" Size=Size.Small Color="@(row.Item.StatusCode == "APPROVED" ? Color.Success 
                                                 : row.Item.StatusCode == "REJECTED" ? Color.Error
                                                 : row.Item.StatusCode == "OPEN" ? Color.Warning
                                                 : Color.Info)">@row.Item.Status</MudChip>
                                            </CellTemplate>
                                        </PropertyColumn>    
                                            <PropertyColumn Property="x => x.CurrentAssignedEmployee" Title="Currently Assigned To" Class="col-assignedto" />
                                        <PropertyColumn Property="x => x.LastUpdateOn" Title="Last Updated On" Class="col-last-update">
                                            <CellTemplate Context="row">
                                                    @row.Item.LastUpdateOn?.ToString("dd-MMM-yyyy hh:mm tt")
                                            </CellTemplate>
                                        </PropertyColumn>
                                     </Columns>
                                 </MudDataGrid>
                             </div>
                        </MudPaper>
                        <MudScrollToTop TopOffset="100"
                                        Selector="#updateHistoryPanel"
                                        VisibleCssClass="visible absolute"
                                        HiddenCssClass="hidden absolute">
                            <MudButton Variant="Variant.Filled" StartIcon="@Icons.Material.Filled.ArrowUpward" Color="Color.Error">Go to top</MudButton>
                        </MudScrollToTop>
                    </MudStack>
                </div>
            </MudTabPanel>
            <MudTabPanel Text="Documents" ToolTip="Manage employee-related documents" Icon="@Icons.Material.Rounded.DocumentScanner">
                <div id="otherDocsPanel" class="ma-0 full-height" style="overflow-y: scroll; scrollbar-width: none;">
                    <MudExpansionPanels Elevation="0" MultiExpansion="true">
                        <MudExpansionPanel Class="pt-0 mt-0" Dense Gutters Expanded>
                            <TitleContent>
                                <div class="d-flex">
                                    <MudIcon Icon="fas fa-history" Size=Size.Small Style="color: #004165;" class="mr-3"></MudIcon>
                                    <MudText Typo="Typo.subtitle1" Style="text-decoration: underline; color: #004165;"><strong>Documents</strong></MudText>
                                    <MudSpacer />
                                    <MudFab Style="background-color: #004165; color: white;" StartIcon="@Icons.Material.Filled.Add" Size=Size.Small Class="mr-3" />
                                </div>
                            </TitleContent>
                            <ChildContent>
                                <MudPaper Elevation="4" Square="true" Class="w-100">
                                    <MudDataGrid T="OtherDocumentDTO" Items="@employee.OtherDocumentList" Hover="true" Striped="true" Class="document-grid"
                                        TableClass="fixed-table" Dense="false" ColumnResizeMode="ResizeMode.Column" HorizontalScrollbar="true"
                                        EditMode="DataGridEditMode.Form">
                                        <Columns>
                                            <PropertyColumn Property="x => x.AutoId" Hidden />
                                            <PropertyColumn Property="x => x.DocumentTypeCode" Hidden />
                                            <PropertyColumn Property="x => x.DocumentTypeDesc" Title="Document Type" Class="col-document-type" />
                                            <PropertyColumn Property="x => x.DocumentName" Title="Name" Class="col-document-name" />
                                            <PropertyColumn Property="x => x.Description" Class="col-description" />
                                            <PropertyColumn Property="x => x.FileExtension" Title="File Ext." Class="col-file-ext" />
                                            <PropertyColumn Property="x => x.ContentTypeCode" Title="Content Type" Class="col-content-type" />
                                            <PropertyColumn Property="x => x.UploadDate" Title="Uloaded On" Class="col-uploadedon">
                                                 <CellTemplate Context="row">
                                                     @row.Item.UploadDate?.ToString("dd-MMM-yyyy")
                                                </CellTemplate>
                                            </PropertyColumn>
                                            <TemplateColumn Hidden="false" CellClass="d-flex justify-end">
                                                <CellTemplate Context="row">
                                                    <MudIconButton Color="Color.Info" title="Edit record" Class="show-btn fa-icon-btn" OnClick="@row.Actions.StartEditingItemAsync">
                                                        <ChildContent>
                                                            ,<i class="fas fa-edit fa-1x"></i>
                                                        </ChildContent>
                                                    </MudIconButton>
                                                    <MudIconButton Color="Color.Primary" title="Download file" Class="hide-btn fa-icon-btn" OnClick="@row.Actions.StartEditingItemAsync">
                                                        <ChildContent>
                                                            <i class="fas fa-download fa-1x"></i>
                                                        </ChildContent>
                                                    </MudIconButton>
                                                    <MudIconButton Color="Color.Secondary" title="View file" Class="hide-btn fa-icon-btn" OnClick="@row.Actions.StartEditingItemAsync">
                                                        <ChildContent>
                                                            <i class="fas fa-eye fa-1x"></i>
                                                        </ChildContent>
                                                    </MudIconButton>
                                                    <MudIconButton Color="Color.Success" title="Save changes" Class="hide-btn fa-icon-btn" OnClick="@row.Actions.StartEditingItemAsync">
                                                        <ChildContent>
                                                            <i class="fas fa-save fa-1x"></i>
                                                        </ChildContent>
                                                    </MudIconButton>
                                                    <MudIconButton Color="Color.Error" title="Delete record" Class="show-btn fa-icon-btn" OnClick="@row.Actions.StartEditingItemAsync">
                                                        <ChildContent>
                                                            <i class="fas fa-trash-alt fa-1x"></i>
                                                        </ChildContent>
                                                    </MudIconButton>
                                                </CellTemplate>
                                            </TemplateColumn>
                                        </Columns>
                                        <NoRecordsContent>
			                                 <div class="no-data-box">
				                                 <MudIcon Icon="@Icons.Material.Filled.Info" Class="no-data-icon" />
				                                 <span>No data found</span>
			                                 </div>
		                                </NoRecordsContent>
                                    </MudDataGrid>
                                </MudPaper>
                            </ChildContent>
                        </MudExpansionPanel>
                        <MudScrollToTop TopOffset="100"
                                         Selector="#otherDocsPanel"
                                        VisibleCssClass="visible absolute"
                                        HiddenCssClass="hidden absolute">
                            <MudButton Variant="Variant.Filled" StartIcon="@Icons.Material.Filled.ArrowUpward" Color="Color.Error">Go to top</MudButton>
                        </MudScrollToTop>
                    </MudExpansionPanels>
                </div>
            </MudTabPanel>
        </MudTabs>
    </EditForm>
</MudContainer>

<!-- Full-screen overlay -->
@if (_isRunning)
{
    <div class="fullscreen-overlay">
        <MudProgressCircular Indeterminate="true" Size="Size.Medium" Color="Color.Info" />
        <MudText Typo="Typo.h6" Class="mt-2 text-white">@overlayMessage</MudText>
    </div>
}


