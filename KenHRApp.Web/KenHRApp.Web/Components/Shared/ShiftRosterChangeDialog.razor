@using KenHRApp.Web.Components.Common

<MudDialog>
    <TitleContent>
        <MudText Typo="Typo.h6">
            <MudIcon Icon="@DialogIcon" Class="mr-1 mb-n1" Size="Size.Medium" Color="@DialogIconColor" />
            @DialogTitle
        </MudText>
    </TitleContent>
    <DialogContent>
        <MudForm @ref="_form">
            <MudGrid Spacing="7">
                <MudItem xs="6">
                    <MudPaper Elevation="0" Class="p-0 w-100">
                        <MudTextField @bind-Value="ShiftRosterDetail.EmpNo" Label="Employee No." Disabled="true"
                            Variant="Variant.Filled" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                     </MudPaper>
                 </MudItem>
                 <MudItem xs="6">
                     <MudPaper Elevation="0" Class="p-0 w-100">
                        <MudTextField @bind-Value="ShiftRosterDetail.EmpName" Label="Employee Name" Disabled="true"
                                      Variant="Variant.Filled" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                     </MudPaper>
                 </MudItem>
             </MudGrid>
            <MudGrid Spacing="7">
                <MudItem xs="6">
                    <MudPaper Elevation="0" Class="p-0 w-100">
                        <MudTextField @bind-Value="ShiftRosterDetail.DepartmentName" Label="Department" Disabled="true"
                                      Variant="Variant.Filled" Margin="Margin.Dense" Typo="Typo.subtitle2" />
                    </MudPaper>
                </MudItem>
                <MudItem xs="6">
                    <MudPaper Elevation="0" Class="p-0 w-100">
                        <MudSelect @bind-Value="ShiftRosterDetail.ChangeTypeCode"
                            For="@(() => ShiftRosterDetail.ChangeTypeCode)" 
                            Text="ShiftRosterDetail.ChangeTypeDesc"
                            Variant="Variant.Text" Margin="Margin.Dense"
                            Label="Change Type"
                            Placeholder="Please Select" AdornmentIcon="@Icons.Material.Filled.ArrowDropDown" AdornmentColor="Color.Default"
                            Required RequiredError="Shift Pointer is required"
                            Immediate="true" Typo="Typo.subtitle2">
                             @foreach (var ct in ChangeTypeList)
                            {
                                <MudSelectItem Value="ct.UDCCode">@ct.UDCDesc1</MudSelectItem>
                            }
                        </MudSelect>
                        @* <MudAutocomplete @bind-Value="ShiftRosterDetail.ChangeTypeDesc"
                                         SearchFunc="SearchChangeType!"
                                         Variant="Variant.Text"
                                         Label="Change Type"
                                         Margin="Margin.Normal"
                                         Dense="true"
                                         Placeholder="Please Select"
                                         HelperText="Type a key to filter the list"
                                         HelperTextOnFocus="true"
                                         Clearable="true" Typo="Typo.subtitle2"
                                         MaxItems="@(ChangeTypeList != null ? ChangeTypeList.Count : 10)"
                                         Modal="true" /> *@
                    </MudPaper>
                </MudItem>
            </MudGrid>
             <MudGrid Spacing="7">
                 <MudItem xs="6">
                     <MudPaper Elevation="0" Class="p-0 w-100">
                        <MudSelect T="string"
                                   Value="ShiftRosterDetail.ShiftPatternCode"
                                   ValueChanged="@((v) => OnShiftRosterChanged(v))"
                                   Label="Shift Roster"
                                   Variant="Variant.Text"
                                   Margin="Margin.Dense"
                                   Placeholder="Please Select"
                                   AdornmentIcon="@Icons.Material.Filled.ArrowDropDown"
                                   AdornmentColor="Color.Default"
                                   HelperText="Select job title"
                                   HelperTextOnFocus="true"
                                   Immediate="true"
                                   Typo="Typo.subtitle2">
                            @foreach (var sp in ShiftPatternList)
                            {
                                <MudSelectItem Value="sp.ShiftPatternCode">@sp.ShiftPatternCode</MudSelectItem>
                            }
                        </MudSelect>
                     </MudPaper>
                 </MudItem>
                 <MudItem xs="6">
                     <MudPaper Elevation="0" Class="p-0 w-100">
                        <MudSelect @bind-Value="ShiftRosterDetail.ShiftPointer"
                            For="@(() => ShiftRosterDetail.ShiftPointer)"
                            Variant="Variant.Text" Margin="Margin.Dense"
                            Label="Shift Pointer" 
                            Placeholder="Please Select" AdornmentIcon="@Icons.Material.Filled.ArrowDropDown" AdornmentColor="Color.Default"
                            Required RequiredError="Shift Pointer is required"
                            Immediate="true" Typo="Typo.subtitle2">
                            @foreach (var pointer in ShiftRosterDetail.ShiftPointerList)
                            {
                                <MudSelectItem Value="pointer.ShiftPointer">@($"{pointer.ShiftPointer} - {pointer.ShiftDescription}")</MudSelectItem>
                            }
                        </MudSelect>
                     </MudPaper>
                 </MudItem>
             </MudGrid>
             
             <MudGrid Spacing="7">
                 <MudItem xs="6">
                     <MudPaper Elevation="0" Class="p-0 w-100">
                        <MudDatePicker Color="Color.Info" Editable="true"
                            @bind-Date="ShiftRosterDetail.EffectiveDate"
                            Label="Effective Date"
                            For="@(() => ShiftRosterDetail.EffectiveDate)"
                            Required RequiredError="Effective Date is required"
                            MinDate="DateTime.Today"
                            Placeholder="Select Date" />
                     </MudPaper>
                 </MudItem>
                 <MudItem xs="6">
                     <MudPaper Elevation="0" Class="p-0 w-100">
                         <MudDatePicker Color="Color.Info" Editable="true"
                            @bind-Date="ShiftRosterDetail.EndingDate"
                            Label="Ending Date"
                            For="@(() => ShiftRosterDetail.EndingDate)"
                            MinDate="DateTime.Today"
                            Placeholder="Select Date" />
                     </MudPaper>
                 </MudItem>
             </MudGrid>
         </MudForm>
     </DialogContent>

     <DialogActions>
         <MudButton Color="Color.Default" Variant="Variant.Text" Size="Size.Medium" OnClick="Cancel">Cancel</MudButton>
         <MudButton Color="Color.Primary" Variant="Variant.Filled" Size="Size.Medium" OnClick="Save">Save</MudButton>
     </DialogActions>
 </MudDialog>